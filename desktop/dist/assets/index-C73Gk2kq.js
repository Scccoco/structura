const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./speckle-BvIUXgwc.js","./antd-BtCqKfBL.js"])))=>i.map(i=>d[i]);
import{r as Sn,a as Cn,g as wr,b as a,R as Rn,T as ge,B as Pn,d as En,e as _n,f as E,h as In,i as Ke,j as Sr,C as Cr,k as Je,l as Tn,m as On,n as kn,o as Bt,p as $n,q as An,s as Nn,t as Ln,u as Bn,S as De,D as Mn,v as ye,w as ve,x as Re,y as Ge,z as K,A as Dn,I as Le,E as Un,F as mt,G as jt,H as He,J as ae,K as zn,L as Fn,M as bt,N as Mt,O as xt,P as Ne,Q as qn,U as Vn,V as Dt,W as Wn,X as Yn,Y as Rr,Z as Gn,_ as Hn,$ as oe,a0 as Kn,a1 as Pr,a2 as Jn,a3 as Qn,a4 as Xn,a5 as Zn,a6 as es,a7 as ts,a8 as rs,a9 as ns,aa as ss}from"./antd-BtCqKfBL.js";import{I as os}from"./speckle-BvIUXgwc.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var st={exports:{}},Pe={};var Ut;function is(){if(Ut)return Pe;Ut=1;var t=Sn(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,h){var u,p={},x=null,w=null;h!==void 0&&(x=""+h),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(w=d.ref);for(u in d)s.call(d,u)&&!i.hasOwnProperty(u)&&(p[u]=d[u]);if(c&&c.defaultProps)for(u in d=c.defaultProps,d)p[u]===void 0&&(p[u]=d[u]);return{$$typeof:r,type:c,key:x,ref:w,props:p,_owner:o.current}}return Pe.Fragment=n,Pe.jsx=l,Pe.jsxs=l,Pe}var zt;function ls(){return zt||(zt=1,st.exports=is()),st.exports}var e=ls(),We={},Ft;function as(){if(Ft)return We;Ft=1;var t=Cn();return We.createRoot=t.createRoot,We.hydrateRoot=t.hydrateRoot,We}var cs=as();const ds=wr(cs);function Be(){return Be=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Be.apply(this,arguments)}var ce;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ce||(ce={}));const qt="popstate";function us(t){t===void 0&&(t={});function r(s,o){let{pathname:i,search:l,hash:c}=s.location;return gt("",{pathname:i,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:Er(o)}return hs(r,n,null,t)}function M(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function wt(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function fs(){return Math.random().toString(36).substr(2,8)}function Vt(t,r){return{usr:t.state,key:t.key,idx:r}}function gt(t,r,n,s){return n===void 0&&(n=null),Be({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof r=="string"?je(r):r,{state:n,key:r&&r.key||s||fs()})}function Er(t){let{pathname:r="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(r+=s.charAt(0)==="#"?s:"#"+s),r}function je(t){let r={};if(t){let n=t.indexOf("#");n>=0&&(r.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(r.search=t.substr(s),t=t.substr(0,s)),t&&(r.pathname=t)}return r}function hs(t,r,n,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:i=!1}=s,l=o.history,c=ce.Pop,d=null,h=u();h==null&&(h=0,l.replaceState(Be({},l.state,{idx:h}),""));function u(){return(l.state||{idx:null}).idx}function p(){c=ce.Pop;let g=u(),P=g==null?null:g-h;h=g,d&&d({action:c,location:m.location,delta:P})}function x(g,P){c=ce.Push;let _=gt(m.location,g,P);h=u()+1;let k=Vt(_,h),A=m.createHref(_);try{l.pushState(k,"",A)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;o.location.assign(A)}i&&d&&d({action:c,location:m.location,delta:1})}function w(g,P){c=ce.Replace;let _=gt(m.location,g,P);h=u();let k=Vt(_,h),A=m.createHref(_);l.replaceState(k,"",A),i&&d&&d({action:c,location:m.location,delta:0})}function S(g){let P=o.location.origin!=="null"?o.location.origin:o.location.href,_=typeof g=="string"?g:Er(g);return _=_.replace(/ $/,"%20"),M(P,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,P)}let m={get action(){return c},get location(){return t(o,l)},listen(g){if(d)throw new Error("A history only accepts one active listener");return o.addEventListener(qt,p),d=g,()=>{o.removeEventListener(qt,p),d=null}},createHref(g){return r(o,g)},createURL:S,encodeLocation(g){let P=S(g);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:x,replace:w,go(g){return l.go(g)}};return m}var Wt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wt||(Wt={}));function ps(t,r,n){return n===void 0&&(n="/"),ms(t,r,n)}function ms(t,r,n,s){let o=typeof r=="string"?je(r):r,i=Tr(o.pathname||"/",n);if(i==null)return null;let l=_r(t);xs(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=_s(i);c=Rs(l[d],h)}return c}function _r(t,r,n,s){r===void 0&&(r=[]),n===void 0&&(n=[]),s===void 0&&(s="");let o=(i,l,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};d.relativePath.startsWith("/")&&(M(d.relativePath.startsWith(s),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(s.length));let h=ue([s,d.relativePath]),u=n.concat(d);i.children&&i.children.length>0&&(M(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),_r(i.children,r,u,h)),!(i.path==null&&!i.index)&&r.push({path:h,score:Ss(h,i.index),routesMeta:u})};return t.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))o(i,l);else for(let d of Ir(i.path))o(i,l,d)}),r}function Ir(t){let r=t.split("/");if(r.length===0)return[];let[n,...s]=r,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return o?[i,""]:[i];let l=Ir(s.join("/")),c=[];return c.push(...l.map(d=>d===""?i:[i,d].join("/"))),o&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function xs(t){t.sort((r,n)=>r.score!==n.score?n.score-r.score:Cs(r.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const gs=/^:[\w-]+$/,ys=3,vs=2,js=1,bs=10,ws=-2,Yt=t=>t==="*";function Ss(t,r){let n=t.split("/"),s=n.length;return n.some(Yt)&&(s+=ws),r&&(s+=vs),n.filter(o=>!Yt(o)).reduce((o,i)=>o+(gs.test(i)?ys:i===""?js:bs),s)}function Cs(t,r){return t.length===r.length&&t.slice(0,-1).every((s,o)=>s===r[o])?t[t.length-1]-r[r.length-1]:0}function Rs(t,r,n){let{routesMeta:s}=t,o={},i="/",l=[];for(let c=0;c<s.length;++c){let d=s[c],h=c===s.length-1,u=i==="/"?r:r.slice(i.length)||"/",p=Ps({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},u),x=d.route;if(!p)return null;Object.assign(o,p.params),l.push({params:o,pathname:ue([i,p.pathname]),pathnameBase:$s(ue([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=ue([i,p.pathnameBase]))}return l}function Ps(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=Es(t.path,t.caseSensitive,t.end),o=r.match(n);if(!o)return null;let i=o[0],l=i.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:s.reduce((h,u,p)=>{let{paramName:x,isOptional:w}=u;if(x==="*"){let m=c[p]||"";l=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const S=c[p];return w&&!S?h[x]=void 0:h[x]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function Es(t,r,n){r===void 0&&(r=!1),n===void 0&&(n=!0),wt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,r?void 0:"i"),s]}function _s(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return wt(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),t}}function Tr(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const Is=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ts=t=>Is.test(t);function Os(t,r){r===void 0&&(r="/");let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?je(t):t,i;if(n)if(Ts(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),wt(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?i=Gt(n.substring(1),"/"):i=Gt(n,r)}else i=r;return{pathname:i,search:As(s),hash:Ns(o)}}function Gt(t,r){let n=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function ot(t,r,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ks(t){return t.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Or(t,r){let n=ks(t);return r?n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function kr(t,r,n,s){s===void 0&&(s=!1);let o;typeof t=="string"?o=je(t):(o=Be({},t),M(!o.pathname||!o.pathname.includes("?"),ot("?","pathname","search",o)),M(!o.pathname||!o.pathname.includes("#"),ot("#","pathname","hash",o)),M(!o.search||!o.search.includes("#"),ot("#","search","hash",o)));let i=t===""||o.pathname==="",l=i?"/":o.pathname,c;if(l==null)c=n;else{let p=r.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;o.pathname=x.join("/")}c=p>=0?r[p]:"/"}let d=Os(o,c),h=l&&l!=="/"&&l.endsWith("/"),u=(i||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||u)&&(d.pathname+="/"),d}const ue=t=>t.join("/").replace(/\/\/+/g,"/"),$s=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),As=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ns=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ls(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $r=["post","put","patch","delete"];new Set($r);const Bs=["get",...$r];new Set(Bs);function Me(){return Me=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Me.apply(this,arguments)}const St=a.createContext(null),Ms=a.createContext(null),Ue=a.createContext(null),Qe=a.createContext(null),de=a.createContext({outlet:null,matches:[],isDataRoute:!1}),Ar=a.createContext(null);function ze(){return a.useContext(Qe)!=null}function Ct(){return ze()||M(!1),a.useContext(Qe).location}function Nr(t){a.useContext(Ue).static||a.useLayoutEffect(t)}function be(){let{isDataRoute:t}=a.useContext(de);return t?Qs():Ds()}function Ds(){ze()||M(!1);let t=a.useContext(St),{basename:r,future:n,navigator:s}=a.useContext(Ue),{matches:o}=a.useContext(de),{pathname:i}=Ct(),l=JSON.stringify(Or(o,n.v7_relativeSplatPath)),c=a.useRef(!1);return Nr(()=>{c.current=!0}),a.useCallback(function(h,u){if(u===void 0&&(u={}),!c.current)return;if(typeof h=="number"){s.go(h);return}let p=kr(h,JSON.parse(l),i,u.relative==="path");t==null&&r!=="/"&&(p.pathname=p.pathname==="/"?r:ue([r,p.pathname])),(u.replace?s.replace:s.push)(p,u.state,u)},[r,s,l,i,t])}function Xe(){let{matches:t}=a.useContext(de),r=t[t.length-1];return r?r.params:{}}function Us(t,r){return zs(t,r)}function zs(t,r,n,s){ze()||M(!1);let{navigator:o}=a.useContext(Ue),{matches:i}=a.useContext(de),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let h=Ct(),u;if(r){var p;let g=typeof r=="string"?je(r):r;d==="/"||(p=g.pathname)!=null&&p.startsWith(d)||M(!1),u=g}else u=h;let x=u.pathname||"/",w=x;if(d!=="/"){let g=d.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(g.length).join("/")}let S=ps(t,{pathname:w}),m=Ys(S&&S.map(g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:ue([d,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?d:ue([d,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,s);return r&&m?a.createElement(Qe.Provider,{value:{location:Me({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ce.Pop}},m):m}function Fs(){let t=Js(),r=Ls(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},r),n?a.createElement("pre",{style:o},n):null,null)}const qs=a.createElement(Fs,null);class Vs extends a.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){console.error("React Router caught the following error during render",r,n)}render(){return this.state.error!==void 0?a.createElement(de.Provider,{value:this.props.routeContext},a.createElement(Ar.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ws(t){let{routeContext:r,match:n,children:s}=t,o=a.useContext(St);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(de.Provider,{value:r},s)}function Ys(t,r,n,s){var o;if(r===void 0&&(r=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&r.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=(o=n)==null?void 0:o.errors;if(c!=null){let u=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);u>=0||M(!1),l=l.slice(0,Math.min(l.length,u+1))}let d=!1,h=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<l.length;u++){let p=l[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=u),p.route.id){let{loaderData:x,errors:w}=n,S=p.route.loader&&x[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||S){d=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((u,p,x)=>{let w,S=!1,m=null,g=null;n&&(w=c&&p.route.id?c[p.route.id]:void 0,m=p.route.errorElement||qs,d&&(h<0&&x===0?(Xs("route-fallback"),S=!0,g=null):h===x&&(S=!0,g=p.route.hydrateFallbackElement||null)));let P=r.concat(l.slice(0,x+1)),_=()=>{let k;return w?k=m:S?k=g:p.route.Component?k=a.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=u,a.createElement(Ws,{match:p,routeContext:{outlet:u,matches:P,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?a.createElement(Vs,{location:n.location,revalidation:n.revalidation,component:m,error:w,children:_(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):_()},null)}var Lr=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(Lr||{}),Br=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Br||{});function Gs(t){let r=a.useContext(St);return r||M(!1),r}function Hs(t){let r=a.useContext(Ms);return r||M(!1),r}function Ks(t){let r=a.useContext(de);return r||M(!1),r}function Mr(t){let r=Ks(),n=r.matches[r.matches.length-1];return n.route.id||M(!1),n.route.id}function Js(){var t;let r=a.useContext(Ar),n=Hs(),s=Mr();return r!==void 0?r:(t=n.errors)==null?void 0:t[s]}function Qs(){let{router:t}=Gs(Lr.UseNavigateStable),r=Mr(Br.UseNavigateStable),n=a.useRef(!1);return Nr(()=>{n.current=!0}),a.useCallback(function(o,i){i===void 0&&(i={}),n.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,Me({fromRouteId:r},i)))},[t,r])}const Ht={};function Xs(t,r,n){Ht[t]||(Ht[t]=!0)}function Zs(t,r){t?.v7_startTransition,t?.v7_relativeSplatPath}function Ye(t){let{to:r,replace:n,state:s,relative:o}=t;ze()||M(!1);let{future:i,static:l}=a.useContext(Ue),{matches:c}=a.useContext(de),{pathname:d}=Ct(),h=be(),u=kr(r,Or(c,i.v7_relativeSplatPath),d,o==="path"),p=JSON.stringify(u);return a.useEffect(()=>h(JSON.parse(p),{replace:n,state:s,relative:o}),[h,p,o,n,s]),null}function ne(t){M(!1)}function eo(t){let{basename:r="/",children:n=null,location:s,navigationType:o=ce.Pop,navigator:i,static:l=!1,future:c}=t;ze()&&M(!1);let d=r.replace(/^\/*/,"/"),h=a.useMemo(()=>({basename:d,navigator:i,static:l,future:Me({v7_relativeSplatPath:!1},c)}),[d,c,i,l]);typeof s=="string"&&(s=je(s));let{pathname:u="/",search:p="",hash:x="",state:w=null,key:S="default"}=s,m=a.useMemo(()=>{let g=Tr(u,d);return g==null?null:{location:{pathname:g,search:p,hash:x,state:w,key:S},navigationType:o}},[d,u,p,x,w,S,o]);return m==null?null:a.createElement(Ue.Provider,{value:h},a.createElement(Qe.Provider,{children:n,value:m}))}function to(t){let{children:r,location:n}=t;return Us(yt(r),n)}new Promise(()=>{});function yt(t,r){r===void 0&&(r=[]);let n=[];return a.Children.forEach(t,(s,o)=>{if(!a.isValidElement(s))return;let i=[...r,o];if(s.type===a.Fragment){n.push.apply(n,yt(s.props.children,i));return}s.type!==ne&&M(!1),!s.props.index||!s.props.children||M(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=yt(s.props.children,i)),n.push(l)}),n}const ro="6";try{window.__reactRouterVersion=ro}catch{}const no="startTransition",Kt=Rn[no];function so(t){let{basename:r,children:n,future:s,window:o}=t,i=a.useRef();i.current==null&&(i.current=us({window:o,v5Compat:!0}));let l=i.current,[c,d]=a.useState({action:l.action,location:l.location}),{v7_startTransition:h}=s||{},u=a.useCallback(p=>{h&&Kt?Kt(()=>d(p)):d(p)},[d,h]);return a.useLayoutEffect(()=>l.listen(u),[l,u]),a.useEffect(()=>Zs(s),[s]),a.createElement(eo,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}var Jt;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jt||(Jt={}));var Qt;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qt||(Qt={}));var Ee={},it={exports:{}},Xt;function Ze(){return Xt||(Xt=1,(function(t){function r(n){return n&&n.__esModule?n:{default:n}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(it)),it.exports}var _e={},Zt;function oo(){if(Zt)return _e;Zt=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t={items_per_page:"/ —Å—Ç—Ä.",jump_to:"–ü–µ—Ä–µ–π—Ç–∏",jump_to_confirm:"–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å",page:"–°—Ç—Ä–∞–Ω–∏—Ü–∞",prev_page:"–ù–∞–∑–∞–¥",next_page:"–í–ø–µ—Ä–µ–¥",prev_5:"–ü—Ä–µ–¥—ã–¥—É—â–∏–µ 5",next_5:"–°–ª–µ–¥—É—é—â–∏–µ 5",prev_3:"–ü—Ä–µ–¥—ã–¥—É—â–∏–µ 3",next_3:"–°–ª–µ–¥—É—é—â–∏–µ 3",page_size:"—Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã"};return _e.default=t,_e}var Ie={},Te={},Oe={},lt={exports:{}},at={exports:{}},ct={exports:{}},dt={exports:{}},er;function Dr(){return er||(er=1,(function(t){function r(n){"@babel/helpers - typeof";return t.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},t.exports.__esModule=!0,t.exports.default=t.exports,r(n)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(dt)),dt.exports}var ut={exports:{}},tr;function io(){return tr||(tr=1,(function(t){var r=Dr().default;function n(s,o){if(r(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,o||"default");if(r(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(ut)),ut.exports}var rr;function lo(){return rr||(rr=1,(function(t){var r=Dr().default,n=io();function s(o){var i=n(o,"string");return r(i)=="symbol"?i:i+""}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(ct)),ct.exports}var nr;function ao(){return nr||(nr=1,(function(t){var r=lo();function n(s,o,i){return(o=r(o))in s?Object.defineProperty(s,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[o]=i,s}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports})(at)),at.exports}var sr;function co(){return sr||(sr=1,(function(t){var r=ao();function n(o,i){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);i&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(o,d).enumerable})),l.push.apply(l,c)}return l}function s(o){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?n(Object(l),!0).forEach(function(c){r(o,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(l,c))})}return o}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(lt)),lt.exports}var ke={},or;function uo(){return or||(or=1,Object.defineProperty(ke,"__esModule",{value:!0}),ke.commonLocale=void 0,ke.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),ke}var ir;function fo(){if(ir)return Oe;ir=1;var t=Ze().default;Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var r=t(co()),n=uo(),s=(0,r.default)((0,r.default)({},n.commonLocale),{},{locale:"ru_RU",today:"–°–µ–≥–æ–¥–Ω—è",now:"–°–µ–π—á–∞—Å",backToToday:"–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞",ok:"–û–ö",clear:"–û—á–∏—Å—Ç–∏—Ç—å",week:"–ù–µ–¥–µ–ª—è",month:"–ú–µ—Å—è—Ü",year:"–ì–æ–¥",timeSelect:"–í—ã–±—Ä–∞—Ç—å –≤—Ä–µ–º—è",dateSelect:"–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É",monthSelect:"–í—ã–±—Ä–∞—Ç—å –º–µ—Å—è—Ü",yearSelect:"–í—ã–±—Ä–∞—Ç—å –≥–æ–¥",decadeSelect:"–í—ã–±—Ä–∞—Ç—å –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ",dateFormat:"D-M-YYYY",dateTimeFormat:"D-M-YYYY HH:mm:ss",previousMonth:"–ü—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü (PageUp)",nextMonth:"–°–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü (PageDown)",previousYear:"–ü—Ä–µ–¥—ã–¥—É—â–∏–π –≥–æ–¥ (Control + left)",nextYear:"–°–ª–µ–¥—É—é—â–∏–π –≥–æ–¥ (Control + right)",previousDecade:"–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ",nextDecade:"–°–ª–µ–¥—É—â–µ–µ –¥–µ—Å—è—Ç–∏–ª–µ—Ç–∏–µ",previousCentury:"–ü—Ä–µ–¥—ã–¥—É—â–∏–π –≤–µ–∫",nextCentury:"–°–ª–µ–¥—É—é—â–∏–π –≤–µ–∫"});return Oe.default=s,Oe}var $e={},lr;function Ur(){if(lr)return $e;lr=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.default=void 0;const t={placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è",rangePlaceholder:["–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞","–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è"]};return $e.default=t,$e}var ar;function zr(){if(ar)return Te;ar=1;var t=Ze().default;Object.defineProperty(Te,"__esModule",{value:!0}),Te.default=void 0;var r=t(fo()),n=t(Ur());const s={lang:Object.assign({placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É",yearPlaceholder:"–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–¥",quarterPlaceholder:"–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∞–ª",monthPlaceholder:"–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—è—Ü",weekPlaceholder:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–¥–µ–ª—é",rangePlaceholder:["–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞","–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞"],rangeYearPlaceholder:["–ù–∞—á–∞–ª—å–Ω—ã–π –≥–æ–¥","–ì–æ–¥ –æ–∫–æ–Ω—á–∞–Ω–∏—è"],rangeMonthPlaceholder:["–ù–∞—á–∞–ª—å–Ω—ã–π –º–µ—Å—è—Ü","–ö–æ–Ω–µ—á–Ω—ã–π –º–µ—Å—è—Ü"],rangeWeekPlaceholder:["–ù–∞—á–∞–ª—å–Ω–∞—è –Ω–µ–¥–µ–ª—è","–ö–æ–Ω–µ—á–Ω–∞—è –Ω–µ–¥–µ–ª—è"],shortWeekDays:["–í—Å","–ü–Ω","–í—Ç","–°—Ä","–ß—Ç","–ü—Ç","–°–±"],shortMonths:["–Ø–Ω–≤","–§–µ–≤","–ú–∞—Ä","–ê–ø—Ä","–ú–∞–π","–ò—é–Ω","–ò—é–ª","–ê–≤–≥","–°–µ–Ω","–û–∫—Ç","–ù–æ—è","–î–µ–∫"]},r.default),timePickerLocale:Object.assign({},n.default)};return Te.default=s,Te}var cr;function ho(){if(cr)return Ie;cr=1;var t=Ze().default;Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0;var r=t(zr());return Ie.default=r.default,Ie}var dr;function po(){if(dr)return Ee;dr=1;var t=Ze().default;Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.default=void 0;var r=t(oo()),n=t(ho()),s=t(zr()),o=t(Ur());const i="${label} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–∏–ø–æ–º ${type}",l={locale:"ru",Pagination:r.default,DatePicker:s.default,TimePicker:o.default,Calendar:n.default,global:{placeholder:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ",close:"–ó–∞–∫—Ä—ã—Ç—å"},Table:{filterTitle:"–§–∏–ª—å—Ç—Ä",filterConfirm:"OK",filterReset:"–°–±—Ä–æ—Å–∏—Ç—å",filterEmptyText:"–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤",filterCheckAll:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã",filterSearchPlaceholder:"–ü–æ–∏—Å–∫ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö",emptyText:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö",selectAll:"–í—ã–±—Ä–∞—Ç—å –≤—Å—ë",selectInvert:"–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä",selectNone:"–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ",selectionAll:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ",sortTitle:"–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞",expand:"–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É",collapse:"–°–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É",triggerDesc:"–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é",triggerAsc:"–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é",cancelSort:"–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–º–µ–Ω–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É"},Tour:{Next:"–î–∞–ª–µ–µ",Previous:"–ù–∞–∑–∞–¥",Finish:"–ó–∞–≤–µ—Ä—à–∏—Ç—å"},Modal:{okText:"OK",cancelText:"–û—Ç–º–µ–Ω–∞",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"–û—Ç–º–µ–Ω–∞"},Transfer:{titles:["",""],searchPlaceholder:"–ü–æ–∏—Å–∫",itemUnit:"—ç–ª–µ–º.",itemsUnit:"—ç–ª–µ–º.",remove:"–£–¥–∞–ª–∏—Ç—å",selectAll:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ",deselectAll:"–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ",selectCurrent:"–í—ã–±—Ä–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É",selectInvert:"–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä",removeAll:"–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ",removeCurrent:"–£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"},Upload:{uploading:"–ó–∞–≥—Ä—É–∑–∫–∞...",removeFile:"–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª",uploadError:"–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞",previewFile:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–∞",downloadFile:"–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"},Empty:{description:"–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"},Icon:{icon:"–∏–∫–æ–Ω–∫–∞"},Text:{edit:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",copy:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",copied:"–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ",expand:"–†–∞—Å–∫—Ä—ã—Ç—å",collapse:"–°–≤–µ—Ä–Ω—É—Ç—å"},Form:{optional:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",defaultValidateMessages:{default:"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–ª—è ${label}",required:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ ${label}",enum:"${label} –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–∏–º –∏–∑ [${enum}]",whitespace:"${label} –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º",date:{format:"${label} –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã",parse:"${label} –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ –¥–∞—Ç—É",invalid:"${label} –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–∞—Ç–æ–π"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ${len} —Å–∏–º–≤–æ–ª–æ–≤",min:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ ${min} —Å–∏–º–≤–æ–ª–æ–≤",max:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ ${max} —Å–∏–º–≤–æ–ª–æ–≤",range:"–î–ª–∏–Ω–∞ ${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–µ–∂–¥—É ${min}-${max} —Å–∏–º–≤–æ–ª–∞–º–∏"},number:{len:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–∞ ${len}",min:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ ${min}",max:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ ${max}",range:"${label} –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –º–µ–∂–¥—É ${min}-${max}"},array:{len:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ${label} –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ ${len}",min:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ${label} –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ ${min}",max:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ${label} –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ ${max}",range:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ${label} –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–∂–¥—É ${min} –∏ ${max}"},pattern:{mismatch:"${label} –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω—É ${pattern}"}}},Image:{preview:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"},QRCode:{expired:"QR-–∫–æ–¥ —É—Å—Ç–∞—Ä–µ–ª",refresh:"–û–±–Ω–æ–≤–∏—Ç—å"},ColorPicker:{presetEmpty:"–ü—É—Å—Ç–æ–π",transparent:"–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π",singleColor:"–û–¥–∏–Ω —Ü–≤–µ—Ç",gradientColor:"–ì—Ä–∞–¥–∏–µ–Ω—Ç"}};return Ee.default=l,Ee}var ft,ur;function mo(){return ur||(ur=1,ft=po()),ft}var xo=mo();const go=wr(xo),{Title:yo,Paragraph:vo}=ge,jo=()=>{const t=be(),[r,n]=a.useState(!0);return a.useEffect(()=>{const s=async()=>{if(window.electronAPI){const i=await window.electronAPI.isOnline();n(i)}};s();const o=setInterval(s,3e4);return()=>clearInterval(o)},[]),e.jsx("div",{className:"home-container",children:e.jsxs("div",{className:"home-content",children:[e.jsx("div",{className:"home-status",children:e.jsx(Pn,{status:r?"success":"warning",text:e.jsxs("span",{className:"network-status",children:[r?e.jsx(En,{}):e.jsx(_n,{}),r?" –û–Ω–ª–∞–π–Ω":" –û—Ñ–ª–∞–π–Ω"]})})}),e.jsxs("div",{className:"home-hero",children:[e.jsx("div",{className:"home-logo",children:e.jsx("img",{src:"/logo.svg",alt:"Structura",className:"logo-img"})}),e.jsx(yo,{level:1,className:"home-title",children:"Structura Desktop"}),e.jsx(vo,{className:"home-subtitle",children:"–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏"})]}),e.jsx("div",{className:"home-cta",children:e.jsx(E,{type:"primary",size:"large",icon:e.jsx(In,{}),className:"cta-button",onClick:()=>t("/projects"),children:"–ü—Ä–æ–µ–∫—Ç—ã"})}),e.jsxs("div",{className:"home-footer",children:[e.jsx("div",{className:"footer-logos",children:e.jsx("img",{src:"/logos/most.png",alt:"–û–û–û –ú–æ—Å—Ç",className:"partner-logo"})}),e.jsx("div",{className:"footer-text",children:"¬© 2026 Structura. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã."})]})]})})},{Title:fr,Text:hr}=ge,bo=[{id:"mgu",name:"–ú–ì–£",cached:!0,elements:1250,acts:89},{id:"mvd",name:"–ú–í–î",cached:!1,elements:0,acts:0},{id:"airport",name:"–ê—ç—Ä–æ–ø–æ—Ä—Ç",cached:!1,elements:0,acts:0}],wo=()=>{const t=be();return e.jsxs("div",{className:"projects-container",children:[e.jsxs("div",{className:"projects-header",children:[e.jsx(E,{type:"text",icon:e.jsx(Ke,{}),onClick:()=>t("/"),className:"back-btn",children:"–ì–ª–∞–≤–Ω–∞—è"}),e.jsx(fr,{level:2,className:"projects-title",children:"–ü—Ä–æ–µ–∫—Ç—ã"}),e.jsx(hr,{type:"secondary",children:"–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã"})]}),e.jsx("div",{className:"projects-content",children:e.jsx(Sr,{gutter:[24,24],children:bo.map(r=>e.jsx(Cr,{xs:24,sm:12,md:8,children:e.jsxs(Je,{className:`project-card ${r.cached?"cached":""}`,hoverable:!0,onClick:()=>r.cached&&t(`/project/${r.id}`),children:[e.jsx("div",{className:"project-icon",children:e.jsx(Tn,{})}),e.jsx(fr,{level:3,className:"project-name",children:r.name}),r.cached?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"project-stats",children:[e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:r.elements}),e.jsx("span",{className:"stat-label",children:"—ç–ª–µ–º–µ–Ω—Ç–æ–≤"})]}),e.jsxs("div",{className:"stat",children:[e.jsx("span",{className:"stat-value",children:r.acts}),e.jsx("span",{className:"stat-label",children:"–∞–∫—Ç–æ–≤"})]})]}),e.jsx("div",{className:"project-badge cached",children:"–ö–µ—à–∏—Ä–æ–≤–∞–Ω"})]}):e.jsxs(e.Fragment,{children:[e.jsx(hr,{type:"secondary",className:"project-empty",children:"–î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã"}),e.jsx(E,{icon:e.jsx(On,{}),className:"download-btn",onClick:n=>{n.stopPropagation()},children:"–ó–∞–≥—Ä—É–∑–∏—Ç—å"})]})]})},r.id))})})]})},{Title:pr,Text:So,Paragraph:Co}=ge,Ro=[{id:"schedule",name:"1. –°–º–µ–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ",description:"–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç, –∫–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è",icon:e.jsx(kn,{}),color:"#3b82f6",path:"/schedule",disabled:!0},{id:"aid",name:"2. –†–µ–µ—Å—Ç—Ä –∞–∫—Ç–æ–≤ –ò–î",description:"–ê–∫—Ç—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –º–æ–¥–µ–ª–∏",icon:e.jsx(Bt,{}),color:"#22c55e",path:"/aid"},{id:"materials",name:"3. –†–µ–µ—Å—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",description:"–£—á—ë—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ",icon:e.jsx($n,{}),color:"#8b5cf6",path:"/materials",disabled:!0},{id:"materials-rd",name:"4. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –†–î",description:"–†–∞—Å—á—ë—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ —Ä–∞–±–æ—á–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",icon:e.jsx(An,{}),color:"#f59e0b",path:"/materials-rd",disabled:!0},{id:"materials-estimates",name:"5. –í—ã–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ —Å–º–µ—Ç",description:"–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",icon:e.jsx(Nn,{}),color:"#06b6d4",path:"/materials-estimates",disabled:!0},{id:"model-estimate",name:"6. –ü—Ä–∏–≤—è–∑–∫–∞ –º–æ–¥–µ–ª–∏ –∫ —Å–º–µ—Ç–µ",description:"–°–≤—è–∑—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–æ–¥–µ–ª–∏ —Å–æ —Å–º–µ—Ç–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏",icon:e.jsx(Ln,{}),color:"#ec4899",path:"/model-estimate",disabled:!0},{id:"expense-orders",name:"7. –†–µ–µ—Å—Ç—Ä —Ä–∞—Å—Ö–æ–¥–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤",description:"–£—á—ë—Ç —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤",icon:e.jsx(Bt,{}),color:"#ef4444",path:"/expense-orders",disabled:!0},{id:"viewer",name:"3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä",description:"–ü—Ä–æ—Å–º–æ—Ç—Ä BIM-–º–æ–¥–µ–ª–∏, –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º",icon:e.jsx(Bn,{}),color:"#06b6d4",path:"/viewer"}],Po=()=>{const t=be(),{projectId:r}=Xe(),n={name:r==="mgu"?"–ú–ì–£":r==="mvd"?"–ú–í–î":"–ê—ç—Ä–æ–ø–æ—Ä—Ç"},s=o=>{o.disabled||t(`/project/${r}${o.path}`)};return e.jsxs("div",{className:"project-container",children:[e.jsxs("div",{className:"project-header",children:[e.jsx(E,{type:"text",icon:e.jsx(Ke,{}),onClick:()=>t("/projects"),className:"back-btn",children:"–ü—Ä–æ–µ–∫—Ç—ã"}),e.jsxs("div",{className:"project-info",children:[e.jsx(pr,{level:2,className:"project-title",children:n.name}),e.jsx(So,{type:"secondary",children:"–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã"})]})]}),e.jsx("div",{className:"project-content",children:e.jsx(Sr,{gutter:[24,24],children:Ro.map(o=>e.jsx(Cr,{xs:24,sm:12,md:8,children:e.jsxs(Je,{className:`module-card ${o.disabled?"disabled":""}`,hoverable:!o.disabled,onClick:()=>s(o),children:[e.jsx("div",{className:"module-icon",style:{background:`${o.color}20`,color:o.color},children:o.icon}),e.jsx(pr,{level:4,className:"module-title",children:o.name}),e.jsx(Co,{className:"module-desc",children:o.description}),o.disabled&&e.jsx("div",{className:"module-badge",children:"–°–∫–æ—Ä–æ"})]})},o.id))})})]})},Eo="modulepreload",_o=function(t,r){return new URL(t,r).href},mr={},re=function(r,n,s){let o=Promise.resolve();if(n&&n.length>0){let h=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");o=h(n.map(u=>{if(u=_o(u,s),u in mr)return;mr[u]=!0;const p=u.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(s)for(let S=l.length-1;S>=0;S--){const m=l[S];if(m.href===u&&(!p||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${x}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":Eo,p||(w.as="script"),w.crossOrigin="",w.href=u,d&&w.setAttribute("nonce",d),document.head.appendChild(w),p)return new Promise((S,m)=>{w.addEventListener("load",S),w.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return o.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return r().catch(i)})},Io=({onFit:t,onMeasure:r,onSection:n,onCameraView:s,onToggleSceneExplorer:o,onToggleModels:i,onTogglePropertyFilter:l,measureActive:c,sectionActive:d,sceneExplorerActive:h,modelsActive:u,propertyFilterActive:p})=>{const x=[{key:"top",label:"–í–∏–¥ —Å–≤–µ—Ä—Ö—É"},{key:"front",label:"–í–∏–¥ —Å–ø–µ—Ä–µ–¥–∏"},{key:"side",label:"–í–∏–¥ —Å–±–æ–∫—É"},{key:"iso",label:"–ò–∑–æ–º–µ—Ç—Ä–∏—è"}],w=S=>{s(S.key)};return e.jsx("div",{style:{position:"absolute",top:16,left:16,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",borderRadius:8,padding:"8px 12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},onPointerDown:S=>S.stopPropagation(),onPointerMove:S=>S.stopPropagation(),onPointerUp:S=>S.stopPropagation(),onWheel:S=>S.stopPropagation(),children:e.jsxs(De,{wrap:!0,children:[e.jsx(E,{onClick:t,children:"üîç –í–ø–∏—Å–∞—Ç—å"}),e.jsx(E,{type:c?"primary":"default",onClick:r,children:"üìè –ò–∑–º–µ—Ä–µ–Ω–∏—è"}),e.jsx(E,{type:d?"primary":"default",onClick:n,children:"‚úÇÔ∏è –°–µ—á–µ–Ω–∏—è"}),e.jsx(Mn,{menu:{items:x,onClick:w},placement:"bottomLeft",children:e.jsx(E,{children:"üì∑ –í–∏–¥—ã ‚ñº"})}),e.jsx(E,{type:h?"primary":"default",onClick:o,children:"üå≥ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫"}),e.jsx(E,{type:u?"primary":"default",onClick:i,children:"üìÅ –í–µ—Ä—Å–∏–∏"}),e.jsx(E,{type:p?"primary":"default",onClick:l,children:"üìä –§–∏–ª—å—Ç—Ä"})]})})},To=({visible:t,onClose:r,measurementType:n,onTypeChange:s,snapToVertices:o,onSnapChange:i,chainMeasurements:l,onChainChange:c,units:d,onUnitsChange:h,precision:u,onPrecisionChange:p,onClearAll:x})=>{if(!t)return null;const w=a.useRef(null),S=()=>w.current??document.body,m=g=>{g.stopPropagation()};return e.jsx(ye,{theme:{algorithm:ve.defaultAlgorithm,token:{colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorText:"#000000",colorTextSecondary:"#666666",colorBorder:"#d9d9d9",colorPrimary:"#1890ff"}},children:e.jsxs("div",{ref:w,onPointerDown:g=>g.stopPropagation(),onPointerMove:g=>g.stopPropagation(),onPointerUp:g=>g.stopPropagation(),onWheel:g=>g.stopPropagation(),style:{position:"absolute",top:100,left:16,zIndex:1e4,background:"white",borderRadius:8,padding:16,boxShadow:"0 4px 12px rgba(0,0,0,0.2)",width:300},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[e.jsx("h4",{style:{margin:0,color:"#333"},children:"–†–µ–∂–∏–º –ò–∑–º–µ—Ä–µ–Ω–∏–π"}),e.jsx("button",{onClick:r,style:{border:"none",background:"none",cursor:"pointer",fontSize:20},children:"√ó"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("p",{style:{fontWeight:500,marginBottom:8},children:"–¢–∏–ø –ò–∑–º–µ—Ä–µ–Ω–∏—è"}),e.jsx(Re.Group,{value:n,onChange:g=>s(g.target.value),children:e.jsxs(De,{direction:"vertical",children:[e.jsxs(Re,{value:"pointToPoint",children:[e.jsx("span",{children:"üìê –ú–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:24},children:"–ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏"})]}),e.jsxs(Re,{value:"perpendicular",children:[e.jsx("span",{children:"‚ä• –ü–µ—Ä–ø–µ–Ω–¥–∏–∫—É–ª—è—Ä"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:24},children:"–ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–æ–¥ 90¬∞ —É–≥–ª–æ–º"})]}),e.jsxs(Re,{value:"area",children:[e.jsx("span",{children:"‚ñ¢ –ü–ª–æ—â–∞–¥—å"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:24},children:"–ü–ª–æ—â–∞–¥—å –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏"})]}),e.jsxs(Re,{value:"point",children:[e.jsx("span",{children:"üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–∫–∏"}),e.jsx("div",{style:{fontSize:12,color:"#888",marginLeft:24},children:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã XYZ —Ç–æ—á–∫–∏"})]})]})})]}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(Ge,{checked:o,onChange:g=>i(g.target.checked),children:"–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –≤–µ—Ä—à–∏–Ω–∞–º"})}),e.jsx("div",{style:{marginBottom:16},children:e.jsx(Ge,{checked:l,onChange:g=>c(g.target.checked),children:"–¶–µ–ø–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è"})}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("p",{style:{fontWeight:500,marginBottom:8},children:"–ï–¥–∏–Ω–∏—Ü—ã"}),e.jsx("div",{onPointerDown:m,onPointerMove:m,onPointerUp:m,children:e.jsxs(K,{value:d,onChange:h,getPopupContainer:S,style:{width:"100%"},children:[e.jsx(K.Option,{value:"m",children:"–ú–µ—Ç—Ä—ã (m)"}),e.jsx(K.Option,{value:"mm",children:"–ú–∏–ª–ª–∏–º–µ—Ç—Ä—ã (mm)"}),e.jsx(K.Option,{value:"cm",children:"–°–∞–Ω—Ç–∏–º–µ—Ç—Ä—ã (cm)"}),e.jsx(K.Option,{value:"ft",children:"–§—É—Ç—ã (ft)"}),e.jsx(K.Option,{value:"in",children:"–î—é–π–º—ã (in)"})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("p",{style:{fontWeight:500,marginBottom:8},children:["–¢–æ—á–Ω–æ—Å—Ç—å: ",u]}),e.jsx("div",{onPointerDown:m,onPointerMove:m,onPointerUp:m,children:e.jsx(Dn,{min:0,max:6,value:u,onChange:p})})]}),e.jsx(E,{danger:!0,onClick:x,block:!0,children:"–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è"})]})})},xr=new Set(["Brep","Mesh","Point","Line","Polyline","Curve","Surface","Beam","PolyBeam","ContourPlate","BoltArray","Fitting","Cut","Chamfer","Weld","Objects","Base","Geometry"]),Oo=new Set(["RenderMaterial","Transform","DisplayStyle","BooleanPart","BooleanObject","Boolean"]),Fr=new Set(["BooleanPart","CutPlane","Boolean","BooleanObject","Weld","Fitting","Cut","Chamfer"]);function ko(t){const r=t?.model?.raw;if(!r)return"dive";const n=r?.name,o=(r?.speckle_type||"").split("."),i=o[o.length-1]||"";if(Oo.has(i)||i.includes("Boolean"))return"skip";if(!n||typeof n!="string")return"dive";const l=n.trim();return!l||l.startsWith("http://")||l.startsWith("https://")||l==="ROOT"?"dive":Fr.has(l)?"skip":xr.has(l)||xr.has(i)?"dive":"show"}function qr(t){return t?.children||t?.__children||[]}function $o(t){const r=[],n=[t];for(;n.length;){const s=n.pop(),o=s?.model?.id;o&&r.push(o);const i=qr(s);for(const l of i)n.push(l)}return Array.from(new Set(r))}function vt(t,r=0){if(r>15)return[];const n=ko(t);if(n==="skip")return[];const s=qr(t);if(n==="show"){const l=t?.model?.raw?.name?.trim()||"",c=t?.model?.id||"";if(s.length>0){const d=[];for(const h of s)d.push(...vt(h,r+1));if(d.length>0)return d}return[{node:t,name:l,id:c}]}const o=[];for(const i of s)o.push(...vt(i,r+1));return o}function Ao(t,r){const n=r.trim().toLowerCase(),s=vt(t),o=new Map;for(const l of s){const c=l.name||"–ë–µ–∑ –∏–º–µ–Ω–∏";o.has(c)||o.set(c,[]),o.get(c).push(l)}const i=[];for(const[l,c]of o){if(Fr.has(l)||n&&!l.toLowerCase().includes(n))continue;const d=c.length,h=`group__${l}`;if(d===1){const u=c[0];i.push({key:`leaf__${u.id}`,title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsx("span",{style:{fontWeight:500},children:l}),e.jsx("span",{style:{color:"#999",fontSize:12,marginLeft:8},children:"(1)"})]}),nodeRef:u.node,children:[]})}else{const u=c.map((p,x)=>({key:`leaf__${p.id}__${x}`,title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsxs("span",{style:{color:"#666"},children:["#",x+1]}),e.jsxs("span",{style:{color:"#999",fontSize:11},children:[p.id.slice(0,8),"..."]})]}),nodeRef:p.node,isLeaf:!0}));i.push({key:h,title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsx("span",{style:{fontWeight:600},children:l}),e.jsxs("span",{style:{color:"#1890ff",fontSize:12,marginLeft:8},children:["(",d,")"]})]}),nodeRef:{__isGroup:!0,elements:c},children:u})}}return i.sort((l,c)=>{const d=l.nodeRef?.elements?.length??1;return(c.nodeRef?.elements?.length??1)-d}),i}function gr(t){return t?t.__isGroup&&t.elements?t.elements.map(r=>r.id):$o(t):[]}const No=({visible:t,onClose:r,viewerInstance:n,filteringExt:s,selectionExt:o,cameraController:i})=>{const[l,c]=a.useState(null),[d,h]=a.useState(""),[u,p]=a.useState(null),x=a.useRef(null);a.useEffect(()=>{if(!t||!n)return;const T=n.getWorldTree?.(),y=T?.root||T?.getRoot?.()||null;c(y)},[t,n]);const w=a.useMemo(()=>l?Ao(l,d):[],[l,d]),S=a.useCallback((T,y)=>{const R=y?.node?.nodeRef??null;if(p(R),R&&o&&n){const f=gr(R);if(f.length>0)try{o.clearSelection?.(),o.selectObjects?.(f),n.requestRender?.()}catch(j){console.warn("Selection failed:",j)}}},[o,n]),m=a.useCallback(()=>{i?.disableRotations?.()},[i]),g=a.useCallback(()=>{i?.enableRotations?.()},[i]);if(a.useEffect(()=>{!t&&i?.enableRotations&&i.enableRotations()},[t,i]),!t)return null;const P=()=>{if(!s)throw new Error("FilteringExtension –Ω–µ –≥–æ—Ç–æ–≤");if(!n)throw new Error("Viewer –Ω–µ –≥–æ—Ç–æ–≤")},_=()=>gr(u),k=()=>{P();const T=_();T.length&&(s.isolateObjects(T,"scene-explorer",!0,!0),n.requestRender?.())},A=()=>{P();const T=_();T.length&&(s.unIsolateObjects(T,"scene-explorer",!0,!0),n.requestRender?.())},z=()=>{P();const T=_();T.length&&(s.hideObjects(T,"scene-explorer",!0,!1),n.requestRender?.())},$=()=>{P();const T=_();T.length&&(s.showObjects(T,"scene-explorer",!0),n.requestRender?.())},Y=()=>{P(),s.resetFilters(),n.requestRender?.()},J=_().length,D=u?.elements?`${u.elements.length} –æ–±—ä–µ–∫—Ç–æ–≤`:u?.model?.raw?.name||"—ç–ª–µ–º–µ–Ω—Ç";return e.jsx(ye,{theme:{algorithm:ve.defaultAlgorithm,token:{colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorText:"#000000",colorTextSecondary:"#666666",colorBorder:"#d9d9d9",colorPrimary:"#1890ff"}},children:e.jsxs("div",{ref:x,onPointerEnter:m,onPointerLeave:g,onPointerDown:T=>T.stopPropagation(),onPointerMove:T=>T.stopPropagation(),onPointerUp:T=>T.stopPropagation(),onWheel:T=>T.stopPropagation(),style:{position:"absolute",top:80,left:16,zIndex:1e4,width:380,background:"white",borderRadius:10,padding:12,boxShadow:"0 4px 14px rgba(0,0,0,0.18)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsx("div",{style:{fontWeight:600},children:"üå≥ –ü—Ä–æ–≤–æ–¥–Ω–∏–∫ —Å—Ü–µ–Ω—ã"}),e.jsx("button",{onClick:r,style:{border:"none",background:"none",cursor:"pointer",fontSize:18},children:"√ó"})]}),e.jsx(Le,{placeholder:"–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏...",value:d,onChange:T=>h(T.target.value),style:{marginBottom:10}}),e.jsxs(De,{wrap:!0,style:{marginBottom:10},children:[e.jsx(E,{size:"small",onClick:k,disabled:!u,children:"–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å"}),e.jsx(E,{size:"small",onClick:A,disabled:!u,children:"–°–Ω—è—Ç—å –∏–∑–æ–ª—è—Ü–∏—é"}),e.jsx(E,{size:"small",onClick:z,disabled:!u,children:"–°–∫—Ä—ã—Ç—å"}),e.jsx(E,{size:"small",onClick:$,disabled:!u,children:"–ü–æ–∫–∞–∑–∞—Ç—å"}),e.jsx(E,{size:"small",danger:!0,onClick:Y,children:"–°–±—Ä–æ—Å"})]}),e.jsx("div",{style:{maxHeight:"55vh",overflow:"auto",border:"1px solid #eee",borderRadius:8,padding:6},children:w.length>0?e.jsx(Un,{treeData:w,onSelect:S,showLine:{showLeafIcon:!1}}):e.jsx("div",{style:{color:"#999",textAlign:"center",padding:20},children:l?"–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤":"–ó–∞–≥—Ä—É–∑–∫–∞..."})}),u&&e.jsxs("div",{style:{marginTop:8,fontSize:12,color:"#666"},children:["‚úì –í—ã–±—Ä–∞–Ω–æ: ",D," (",J," ID)"]}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:"#999"},children:["–í—Å–µ–≥–æ –≥—Ä—É–ø–ø: ",w.length]})]})})},Lo=`
    query GetCommits($streamId: String!, $limit: Int!) {
        stream(id: $streamId) {
            name
            commits(limit: $limit) {
                items {
                    id
                    referencedObject
                    message
                    createdAt
                    authorName
                }
            }
        }
    }
`,Bo=({visible:t,onClose:r,speckleServer:n,token:s,streamId:o,currentObjectId:i,onSelectObjectId:l,onSetStreamName:c,onStartDiff:d,onStopDiff:h,diffMode:u=!1,diffCommitA:p,diffCommitB:x,diffStats:w})=>{const[S,m]=a.useState(!1),[g,P]=a.useState([]),[_,k]=a.useState(null),[A,z]=a.useState(new Set);a.useEffect(()=>{if(!t||!o)return;(async()=>{try{m(!0),k(null);const R=await fetch(`${n}/graphql`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({query:Lo,variables:{streamId:o,limit:20}})});if(!R.ok)throw new Error(`HTTP ${R.status}`);const f=await R.json();if(f.errors?.length)throw new Error(f.errors[0].message);const j=f.data?.stream;if(!j)throw new Error("–ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω");c?.(j.name);const v=j.commits?.items||[];P(v)}catch(R){k(R?.message||"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–µ—Ä—Å–∏–π")}finally{m(!1)}})()},[t,o,n,s,c]);const $=a.useCallback(y=>{z(R=>{const f=new Set(R);if(f.has(y))f.delete(y);else{if(f.size>=2){const j=f.values().next().value;j&&f.delete(j)}f.add(y)}return f})},[]),Y=a.useCallback(()=>{const y=Array.from(A);if(y.length!==2||!d)return;const R=g.findIndex(q=>q.referencedObject===y[0]),f=g.findIndex(q=>q.referencedObject===y[1]);let j,v;R>f?(j=y[0],v=y[1]):(j=y[1],v=y[0]),console.log("Diff: A(—Å—Ç–∞—Ä–∞—è)=",j.slice(0,8),", B(–Ω–æ–≤–∞—è)=",v.slice(0,8)),d(j,v)},[A,d,g]),J=a.useCallback(()=>{h?.(),z(new Set)},[h]);if(!t)return null;const D=A.size===2&&d,T=!!d;return e.jsx(ye,{theme:{algorithm:ve.defaultAlgorithm,token:{colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorText:"#000000",colorTextSecondary:"#666666",colorBorder:"#d9d9d9",colorPrimary:"#1890ff"}},children:e.jsxs("div",{onPointerDown:y=>y.stopPropagation(),onPointerMove:y=>y.stopPropagation(),onPointerUp:y=>y.stopPropagation(),onWheel:y=>y.stopPropagation(),style:{position:"absolute",top:80,right:16,zIndex:1e4,width:380,background:"white",borderRadius:10,padding:12,boxShadow:"0 4px 14px rgba(0,0,0,0.18)",maxHeight:"70vh",overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsx("div",{style:{fontWeight:600},children:"üóÇ –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π"}),e.jsx("button",{onClick:r,style:{border:"none",background:"none",cursor:"pointer",fontSize:18},children:"√ó"})]}),u&&e.jsx(mt,{type:"warning",message:"–†–µ–∂–∏–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è",description:e.jsxs("div",{style:{fontSize:12},children:[e.jsx("div",{style:{marginBottom:8},children:"üü¢ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ ¬∑ üü° –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ ¬∑ üî¥ –£–¥–∞–ª—ë–Ω–Ω—ã–µ ¬∑ ‚ö™ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π"}),w&&e.jsxs("div",{style:{background:"#fff",padding:8,borderRadius:4,marginBottom:8},children:[e.jsx("strong",{children:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:4},children:[e.jsxs("span",{children:["üü¢ –î–æ–±–∞–≤–ª–µ–Ω–æ: ",e.jsx("b",{children:w.added})]}),e.jsxs("span",{children:["üî¥ –£–¥–∞–ª–µ–Ω–æ: ",e.jsx("b",{children:w.removed})]}),e.jsxs("span",{children:["üü° –ò–∑–º–µ–Ω–µ–Ω–æ: ",e.jsx("b",{children:w.modified})]}),e.jsxs("span",{children:["‚ö™ –ë–µ–∑ –∏–∑–º.: ",e.jsx("b",{children:w.unchanged})]})]})]}),e.jsx(E,{size:"small",onClick:J,children:"–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ"})]}),style:{marginBottom:10}}),!u&&T&&e.jsxs("div",{style:{marginBottom:10,padding:8,background:"#f5f5f5",borderRadius:6,fontSize:12},children:[e.jsx("div",{style:{marginBottom:6,color:"#666"},children:"–í—ã–±–µ—Ä–∏—Ç–µ 2 –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:"}),e.jsxs(De,{children:[e.jsxs(E,{size:"small",type:"primary",onClick:Y,disabled:!D,children:["üîÄ –°—Ä–∞–≤–Ω–∏—Ç—å (",A.size,"/2)"]}),A.size>0&&e.jsx(E,{size:"small",onClick:()=>z(new Set),children:"–°–±—Ä–æ—Å–∏—Ç—å"})]})]}),S&&e.jsxs("div",{style:{padding:20,textAlign:"center"},children:[e.jsx(jt,{}),e.jsx("div",{style:{marginTop:8,color:"#666"},children:"–ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ—Ä—Å–∏–π..."})]}),_&&e.jsx("div",{style:{color:"crimson",padding:12,background:"#fff5f5",borderRadius:8},children:_}),!S&&!_&&g.map((y,R)=>{const f=i===y.referencedObject,j=R===0,v=A.has(y.referencedObject),q=p===y.referencedObject,fe=x===y.referencedObject;return e.jsxs("div",{style:{border:"1px solid #eee",borderRadius:8,padding:12,marginBottom:8,background:f?"rgba(24, 144, 255, 0.08)":v?"rgba(250, 140, 22, 0.08)":"white",borderColor:f?"#1890ff":v?"#fa8c16":"#eee"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[!u&&T&&e.jsx(Ge,{checked:v,onChange:()=>$(y.referencedObject),style:{marginRight:8}}),e.jsxs("div",{style:{fontWeight:600,flex:1,color:f?"#1890ff":"#333"},children:[j&&f?"‚úì –ü–æ—Å–ª–µ–¥–Ω—è—è (–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è)":j?"–ü–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è":f?"‚úì –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è":`–í–µ—Ä—Å–∏—è #${g.length-R}`,q&&e.jsx("span",{style:{color:"#fa541c",marginLeft:6},children:"A"}),fe&&e.jsx("span",{style:{color:"#52c41a",marginLeft:6},children:"B"})]})]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginBottom:6},children:[y.createdAt?new Date(y.createdAt).toLocaleString("ru-RU"):"–î–∞—Ç–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞",y.authorName?` ¬∑ ${y.authorName}`:""]}),e.jsx("div",{style:{marginBottom:8,fontSize:13},children:y.message||"(–±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏—è)"}),!u&&e.jsx(E,{size:"small",type:f?"default":"primary",onClick:()=>l(y.referencedObject),disabled:f,children:f?"–£–∂–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è":"–û—Ç–∫—Ä—ã—Ç—å"})]},y.id)}),!S&&!_&&g.length===0&&e.jsx("div",{style:{color:"#999",textAlign:"center",padding:20},children:"–í–µ—Ä—Å–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"})]})})},yr="viewer_model_attributes",ht="viewer_model_attribute_labels",pt=["speckle_type","name","NAME","PHASE","WIDTH","HEIGHT","LENGTH","VOLUME","WEIGHT","AREA","PREFIX","PROFILE_TYPE","MATERIAL_TYPE","ASSEMBLY_POS","MOST_level_1","MOST_level_2","MOST_level_3","MOST_classification"],vr=["id","applicationId","totalChildrenCount","__closure","displayStyle","renderMaterial","displayValue","referencedId"],Mo=["Report","User Defined Attributes","properties"];function Do(t){const r=[];if(!t)return r;const n=(s,o)=>{Object.entries(s).forEach(([i,l])=>{if(!vr.includes(i)){if(i==="properties"&&typeof l=="object"&&l!==null&&!Array.isArray(l)){n(l);return}Mo.includes(i)&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.entries(l).forEach(([c,d])=>{vr.includes(c)||(typeof d=="object"&&d!==null&&"value"in d?r.push({key:`${i}.${c}`,name:d.name||c,value:d.value,units:d.units,group:i,originalKey:c}):r.push({key:`${i}.${c}`,name:c,value:d,group:i,originalKey:c}))}):typeof l=="object"&&l!==null&&!Array.isArray(l)&&"value"in l&&Object.keys(l).length<=4?r.push({key:i,name:l.name||i,value:l.value,units:l.units,group:"–û—Å–Ω–æ–≤–Ω—ã–µ",originalKey:i}):(typeof l!="object"||l===null||Array.isArray(l))&&r.push({key:i,name:i,value:l,group:"–û—Å–Ω–æ–≤–Ω—ã–µ",originalKey:i})}})};return n(t),r}const Uo=({selectedElement:t,onClose:r})=>{const[n,s]=a.useState(!1),[o,i]=a.useState([]),[l,c]=a.useState({}),[d,h]=a.useState(""),[u,p]=a.useState(["Report","User Defined Attributes"]),[x,w]=a.useState(null),[S,m]=a.useState("");a.useEffect(()=>{const f=localStorage.getItem(yr);if(f)try{i(JSON.parse(f))}catch{i(pt)}else i(pt);const j=localStorage.getItem(ht);if(j)try{c(JSON.parse(j))}catch{c({})}},[]);const g=a.useMemo(()=>t?.properties?Do(t.properties):[],[t?.properties]),P=a.useMemo(()=>[...new Set(g.map(f=>f.name))].sort(),[g]),_=a.useMemo(()=>{const f={–û—Å–Ω–æ–≤–Ω—ã–µ:[],Report:[],"User Defined Attributes":[]};return g.filter(j=>o.includes(j.name)||o.length===0).filter(j=>{if(!d)return!0;const v=d.toLowerCase();return j.name.toLowerCase().includes(v)||String(j.value).toLowerCase().includes(v)}).forEach(j=>{const v=j.group||"–û—Å–Ω–æ–≤–Ω—ã–µ";f[v]||(f[v]=[]),f[v].push(j)}),f},[g,o,d]),k=Object.values(_).reduce((f,j)=>f+j.length,0),A=f=>{const j=f.value;if(j==null)return"‚Äî";if(typeof j=="boolean")return j?"–î–∞":"–ù–µ—Ç";if(typeof j=="number"){let v=j,q=f.units||"";if(f.units){const Q=f.units.toLowerCase();Q.includes("cubic millimeter")||Q==="mm¬≥"||Q==="mm3"?(v=j/1e9,q="–º¬≥"):Q.includes("square millimeter")||Q==="mm¬≤"||Q==="mm2"?(v=j/1e6,q="–º¬≤"):Q==="millimeters"||Q==="mm"?(v=j/1e3,q="–º"):(Q==="kilograms"||Q==="kg")&&(j>=1e3?(v=j/1e3,q="—Ç"):q="–∫–≥")}const fe=v<.001&&v>0?v.toExponential(2):v<10?v.toFixed(3):v.toFixed(2);return q?`${fe} ${q}`:fe}return Array.isArray(j)?`[${j.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤]`:typeof j=="object"?JSON.stringify(j):String(j)},z=f=>{navigator.clipboard.writeText(f)},$=f=>{i(f),localStorage.setItem(yr,JSON.stringify(f))},Y=(f,j)=>{const v={...l};j.trim()&&j.trim()!==f?v[f]=j.trim():delete v[f],c(v),localStorage.setItem(ht,JSON.stringify(v))},J=f=>l[f]||f.replace(/_/g," "),D=()=>{$(pt)},T=()=>{c({}),localStorage.removeItem(ht)},y=()=>{$(P)};if(!t)return null;const R=(f,j)=>j.length===0?null:e.jsx(Ne.Panel,{header:e.jsxs("span",{style:{fontSize:12,fontWeight:500},children:[f==="Report"?"üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Tekla":f==="User Defined Attributes"?"üìù –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã":"üìê –û—Å–Ω–æ–≤–Ω—ã–µ",e.jsx(He,{style:{marginLeft:8},children:j.length})]}),children:e.jsx(Dt,{column:1,size:"small",bordered:!0,labelStyle:{width:140,fontSize:11,padding:"4px 8px",background:"#fafafa"},contentStyle:{fontSize:11,padding:"4px 8px",wordBreak:"break-word"},children:j.map(v=>e.jsx(Dt.Item,{label:e.jsx(ae,{title:`–û—Ä–∏–≥–∏–Ω–∞–ª: ${v.originalKey}`,children:e.jsx("span",{children:J(v.name)})}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:A(v)}),e.jsx(ae,{title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",children:e.jsx(Mt,{style:{cursor:"pointer",color:"#999",fontSize:10},onClick:()=>z(A(v))})})]})},v.key))})},f);return e.jsx(ye,{theme:{algorithm:ve.defaultAlgorithm,token:{colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorText:"#000000",colorTextSecondary:"#666666",colorBorder:"#d9d9d9",colorPrimary:"#1890ff"}},children:e.jsxs("div",{style:{position:"absolute",right:16,top:80,width:380,background:"white",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.15)",overflow:"hidden",zIndex:1e3},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 16px",borderBottom:"1px solid #f0f0f0",background:"#fafafa"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("h4",{style:{margin:0,fontSize:13},children:"üìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–∞"}),e.jsx(He,{color:"blue",style:{margin:0,fontSize:10},children:t.type.split(".").pop()})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx(ae,{title:"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤",children:e.jsx(E,{type:"text",size:"small",icon:e.jsx(zn,{}),onClick:()=>s(!0)})}),e.jsx(E,{type:"text",size:"small",icon:e.jsx(Fn,{}),onClick:r})]})]}),e.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #f0f0f0"},children:e.jsx(Le,{size:"small",placeholder:"–ü–æ–∏—Å–∫ –∞—Ç—Ä–∏–±—É—Ç–æ–≤...",prefix:e.jsx(bt,{}),value:d,onChange:f=>h(f.target.value),allowClear:!0})}),e.jsxs("div",{style:{padding:"6px 12px",background:"#f5f5f5",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:"ID: "}),e.jsx(ae,{title:"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID",children:e.jsxs("span",{style:{cursor:"pointer",fontFamily:"monospace"},onClick:()=>z(t.id),children:[t.id.slice(0,24),"...",e.jsx(Mt,{style:{marginLeft:4,fontSize:9}})]})})]}),e.jsx("div",{style:{maxHeight:"calc(100vh - 320px)",overflow:"auto"},children:k===0?e.jsx(xt,{image:xt.PRESENTED_IMAGE_SIMPLE,description:d?"–ê—Ç—Ä–∏–±—É—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã":"–ù–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤",style:{padding:20},children:!d&&e.jsx(E,{size:"small",onClick:y,children:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"})}):e.jsxs(Ne,{defaultActiveKey:u,onChange:f=>p(f),bordered:!1,size:"small",children:[R("–û—Å–Ω–æ–≤–Ω—ã–µ",_.–û—Å–Ω–æ–≤–Ω—ã–µ),R("Report",_.Report),R("User Defined Attributes",_["User Defined Attributes"])]})}),e.jsxs("div",{style:{padding:"6px 12px",borderTop:"1px solid #f0f0f0",fontSize:10,color:"#888",textAlign:"center"},children:["–ü–æ–∫–∞–∑–∞–Ω–æ ",k," –∏–∑ ",g.length," –∞—Ç—Ä–∏–±—É—Ç–æ–≤"]}),e.jsxs(qn,{title:"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤",open:n,onCancel:()=>{s(!1),w(null)},footer:[e.jsx(E,{onClick:T,children:"–°–±—Ä–æ—Å–∏—Ç—å –∏–º–µ–Ω–∞"},"resetLabels"),e.jsx(E,{onClick:D,children:"–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"},"reset"),e.jsx(E,{onClick:y,children:"–í—ã–±—Ä–∞—Ç—å –≤—Å–µ"},"all"),e.jsx(E,{onClick:()=>$([]),children:"–û—á–∏—Å—Ç–∏—Ç—å"},"none"),e.jsx(E,{type:"primary",onClick:()=>{s(!1),w(null)},children:"–ì–æ—Ç–æ–≤–æ"},"close")],width:550,children:[e.jsx("p",{style:{marginBottom:12,color:"#666",fontSize:12},children:"–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –∑–∞–¥–∞–π—Ç–µ –∏–º –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞:"}),e.jsx("div",{style:{maxHeight:400,overflow:"auto"},children:P.map(f=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 0",borderBottom:"1px solid #f0f0f0"},children:[e.jsx(Ge,{checked:o.includes(f),onChange:j=>{j.target.checked?$([...o,f]):$(o.filter(v=>v!==f))}}),x===f?e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",gap:4},children:[e.jsx(Le,{size:"small",value:S,onChange:j=>m(j.target.value),placeholder:f,style:{flex:1,fontSize:11},onPressEnter:()=>{Y(f,S),w(null)},autoFocus:!0}),e.jsx(E,{size:"small",type:"primary",onClick:()=>{Y(f,S),w(null)},children:"‚úì"}),e.jsx(E,{size:"small",onClick:()=>w(null),children:"‚úï"})]}):e.jsxs("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{fontFamily:"monospace",fontSize:11},children:f}),l[f]&&e.jsxs("span",{style:{fontSize:10,color:"#1890ff"},children:["‚Üí ",l[f]]})]}),e.jsx(ae,{title:"–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è",children:e.jsx(Vn,{style:{cursor:"pointer",color:"#999",fontSize:12},onClick:()=>{w(f),m(l[f]||"")}})})]})]},f))})]})]})})},zo=["Report","User Defined Attributes","properties"],jr=["id","applicationId","totalChildrenCount","__closure","displayStyle","renderMaterial","displayValue","referencedId"];function Fo(t){const r={},n=(s,o="")=>{s&&Object.entries(s).forEach(([i,l])=>{if(!jr.includes(i)){if(i==="properties"&&typeof l=="object"&&l!==null){n(l,o);return}zo.includes(i)&&typeof l=="object"&&l!==null&&!Array.isArray(l)?Object.entries(l).forEach(([c,d])=>{jr.includes(c)||(typeof d=="object"&&d!==null&&"value"in d?r[c]={value:d.value,units:d.units,group:i}:r[c]={value:d,group:i})}):typeof l=="object"&&l!==null&&"value"in l&&!Array.isArray(l)?r[i]={value:l.value,units:l.units}:(typeof l!="object"||l===null)&&(r[i]={value:l})}})};return n(t),r}function qo(t,r){if(!r)return{value:t,units:""};const n=r.toLowerCase();return n.includes("cubic millimeter")||n==="mm¬≥"?{value:t/1e9,units:"–º¬≥"}:n.includes("square millimeter")||n==="mm¬≤"?{value:t/1e6,units:"–º¬≤"}:n==="millimeters"||n==="mm"?{value:t/1e3,units:"–º"}:n==="kilograms"||n==="kg"?t>=1e3?{value:t/1e3,units:"—Ç"}:{value:t,units:"–∫–≥"}:{value:t,units:r}}function Vo(t){return t===0?"0":Math.abs(t)<.001?t.toExponential(2):Math.abs(t)<10?t.toFixed(3):Math.abs(t)<1e3?t.toFixed(2):t.toLocaleString("ru-RU",{maximumFractionDigits:2})}const Wo=({viewer:t,filteringExtension:r,worldTree:n,visible:s,onClose:o})=>{const[i,l]=a.useState(!1),[c,d]=a.useState([]),[h,u]=a.useState(null),[p,x]=a.useState([]),[w,S]=a.useState([]),[m,g]=a.useState(null),[P,_]=a.useState(!1),k=a.useCallback(()=>{if(!n)return;l(!0);const y=[];try{const R=j=>{if(j?.model?.raw){const v=j.model.raw;y.push({id:v.id||j.model.id,nodeId:j.model.id,name:v.name,type:v.speckle_type,properties:Fo(v)})}if(j?.children)for(const v of j.children)R(v)},f=n.root;f&&R(f)}catch(R){console.error("Error collecting objects:",R)}d(y),l(!1)},[n]);a.useEffect(()=>{s&&n&&c.length===0&&k()},[s,n,c.length,k]);const A=a.useMemo(()=>{const y=new Set;return c.forEach(R=>{Object.keys(R.properties).forEach(f=>{y.add(f)})}),Array.from(y).sort()},[c]),z=a.useMemo(()=>A.filter(y=>c.some(R=>typeof R.properties[y]?.value=="number")),[A,c]);a.useEffect(()=>{if(!h){x([]);return}const y=new Set;c.forEach(R=>{const f=R.properties[h];f?.value!==void 0&&f?.value!==null&&y.add(String(f.value))}),x(Array.from(y).sort()),S([])},[h,c]);const $=a.useMemo(()=>!h||w.length===0?c:c.filter(y=>{const R=y.properties[h];return R?w.includes(String(R.value)):!1}),[c,h,w]),Y=a.useMemo(()=>{if(!m)return null;let y=0,R="";$.forEach(j=>{const v=j.properties[m];v&&typeof v.value=="number"&&(y+=v.value,!R&&v.units&&(R=v.units))});const f=qo(y,R);return{value:f.value,units:f.units,formatted:Vo(f.value)}},[$,m]),J=a.useCallback(()=>{if(!r)return;const y=$.map(R=>R.nodeId);y.length>0&&(r.isolateObjects(y),_(!0))},[r,$]),D=a.useCallback(()=>{r&&(r.resetFilters(),_(!1))},[r]),T=a.useCallback(()=>{if(!r)return;const y=$.map(R=>R.nodeId);y.length>0&&r.hideObjects(y)},[r,$]);return a.useCallback(()=>{u(null),S([]),g(null),D()},[D]),s?e.jsx(ye,{theme:{algorithm:ve.defaultAlgorithm,token:{colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorText:"#000000",colorTextSecondary:"#666666",colorBorder:"#d9d9d9",colorPrimary:"#1890ff"}},children:e.jsx(Je,{title:e.jsxs("span",{children:[e.jsx(Gn,{style:{marginRight:8}}),"–§–∏–ª—å—Ç—Ä –ø–æ —Å–≤–æ–π—Å—Ç–≤–∞–º"]}),size:"small",style:{width:320,position:"absolute",left:16,top:80,zIndex:1e3,maxHeight:"calc(100vh - 120px)",overflow:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},extra:e.jsx(E,{type:"text",size:"small",onClick:o,children:"‚úï"}),children:i?e.jsx("div",{style:{textAlign:"center",padding:20},children:e.jsx(jt,{tip:"–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤..."})}):c.length===0?e.jsx(xt,{description:"–û–±—ä–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:16,padding:8,background:"#f5f5f5",borderRadius:4},children:e.jsxs("small",{style:{color:"#666"},children:["–í—Å–µ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤: ",e.jsx("strong",{children:c.length}),h&&w.length>0&&e.jsxs(e.Fragment,{children:[" | –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ: ",e.jsx("strong",{children:$.length})]})]})}),e.jsxs(Ne,{defaultActiveKey:["filter"],size:"small",style:{marginBottom:12},children:[e.jsxs(Ne.Panel,{header:"üîç –§–∏–ª—å—Ç—Ä",children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("small",{style:{color:"#666"},children:"–°–≤–æ–π—Å—Ç–≤–æ:"}),e.jsx(K,{style:{width:"100%"},placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π—Å—Ç–≤–æ",value:h,onChange:u,allowClear:!0,showSearch:!0,options:A.map(y=>({label:y,value:y}))})]}),h&&p.length>0&&e.jsxs("div",{children:[e.jsx("small",{style:{color:"#666"},children:"–ó–Ω–∞—á–µ–Ω–∏–µ:"}),e.jsx(K,{style:{width:"100%"},placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è",mode:"multiple",value:w,onChange:S,options:p.map(y=>({label:y,value:y})),maxTagCount:2})]})]},"filter"),e.jsxs(Ne.Panel,{header:"üìä –ê–≥—Ä–µ–≥–∞—Ü–∏—è (—Å—É–º–º–∞)",children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("small",{style:{color:"#666"},children:"–°—É–º–º–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ:"}),e.jsx(K,{style:{width:"100%"},placeholder:"–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Å–ª–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ",value:m,onChange:g,allowClear:!0,showSearch:!0,options:z.map(y=>({label:y,value:y}))})]}),Y&&e.jsxs("div",{style:{padding:12,background:"#e6f7ff",borderRadius:4,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#1890ff"},children:Y.formatted}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[Y.units," (",m,")"]})]})]},"aggregate")]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx(ae,{title:"–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å (–ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ)",children:e.jsx(E,{type:P?"primary":"default",icon:e.jsx(Wn,{}),onClick:J,disabled:$.length===0||$.length===c.length,children:"–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å"})}),e.jsx(ae,{title:"–°–∫—Ä—ã—Ç—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ",children:e.jsx(E,{icon:e.jsx(Yn,{}),onClick:T,disabled:$.length===0,children:"–°–∫—Ä—ã—Ç—å"})}),e.jsx(ae,{title:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã",children:e.jsx(E,{icon:e.jsx(Rr,{}),onClick:D,children:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ"})})]}),e.jsx("div",{style:{marginTop:12,textAlign:"center"},children:e.jsx(E,{type:"link",size:"small",onClick:k,children:"üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤"})})]})})}):null},me="https://speckle.structura-most.ru",xe="b47015ff123fc23131070342b14043c1b8a657dfb7",Yo=`
  query GetLatestCommit($streamId: String!) {
    stream(id: $streamId) {
      name
      commits(limit: 1) {
        items {
          id
          referencedObject
        }
      }
    }
  }
`,Ae={PERPENDICULAR:0,POINT_TO_POINT:1,AREA:2,POINT:3},Vr=a.forwardRef(({streamId:t,token:r=xe,height:n="calc(100vh - 220px)",showToolbar:s=!0,onReady:o,onObjectSelect:i,onAssemblyMapReady:l},c)=>{const d=a.useRef(null),h=a.useRef(null),u=a.useRef(!1),[p,x]=a.useState(!0),[w,S]=a.useState(null),[m,g]=a.useState(null),[P,_]=a.useState(""),[k,A]=a.useState(null),[z,$]=a.useState(null),Y=a.useRef(null),J=a.useRef(new Map),[D,T]=a.useState(null),[y,R]=a.useState(null),[f,j]=a.useState(null),[v,q]=a.useState(null),[fe,Q]=a.useState(null),[he,Wr]=a.useState(null),[Yr,et]=a.useState(!1),[Gr,Rt]=a.useState(null),[Hr,Pt]=a.useState(null),[Kr,Fe]=a.useState(null),[Jr,Qr]=a.useState(!1),[Xr,Zr]=a.useState(!1),[en,tt]=a.useState(!1),[tn,Et]=a.useState("pointToPoint"),[rn,_t]=a.useState(!0),[nn,sn]=a.useState(!1),[on,ln]=a.useState("m"),[an,cn]=a.useState(2),[It,Tt]=a.useState(!1),[Ot,kt]=a.useState(!1),[$t,At]=a.useState(!1);a.useEffect(()=>{t&&fn()},[t]),a.useEffect(()=>{if(!m||!d.current||!t)return;if(h.current&&u.current){Nt(m);return}let b=!1;return(async()=>{try{x(!0),S(null);const{Viewer:I,CameraController:B,SpeckleLoader:V,SelectionExtension:U}=await re(async()=>{const{Viewer:N,CameraController:L,SpeckleLoader:W,SelectionExtension:te}=await import("./speckle-BvIUXgwc.js").then(Ve=>Ve.i);return{Viewer:N,CameraController:L,SpeckleLoader:W,SelectionExtension:te}},__vite__mapDeps([0,1]),import.meta.url),F=`${me}/streams/${t}/objects/${m}`,O=new I(d.current,os);await O.init();const X=O.createExtension(B);Q(X);const G=O.createExtension(U);j(G);const{MeasurementsExtension:H,SectionTool:ie,FilteringExtension:Se}=await re(async()=>{const{MeasurementsExtension:N,SectionTool:L,FilteringExtension:W}=await import("./speckle-BvIUXgwc.js").then(te=>te.i);return{MeasurementsExtension:N,SectionTool:L,FilteringExtension:W}},__vite__mapDeps([0,1]),import.meta.url),se=O.createExtension(H),le=O.createExtension(ie),ee=O.createExtension(Se);let Z=null;try{const N=await re(()=>import("./speckle-BvIUXgwc.js").then(W=>W.i),__vite__mapDeps([0,1]),import.meta.url),L=N.DifExtension||N.DiffExtension;L?(Z=O.createExtension(L),Wr(Z),console.log("‚úÖ DifExtension —Å–æ–∑–¥–∞–Ω")):console.warn("DifExtension –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —ç–∫—Å–ø–æ—Ä—Ç–∞—Ö @speckle/viewer")}catch(N){console.warn("DifExtension –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω:",N)}Y.current={measurements:se,section:le,selection:G,filtering:ee,cameraController:X},T(se),R(le),q(ee),se.options={...se.options,type:Ae.POINT_TO_POINT},Et("pointToPoint"),_t(se.options.vertexSnap??!0);const{ViewerEvent:pe}=await re(async()=>{const{ViewerEvent:N}=await import("./speckle-BvIUXgwc.js").then(L=>L.i);return{ViewerEvent:N}},__vite__mapDeps([0,1]),import.meta.url);O.on(pe.ObjectClicked,N=>{if(N?.hits?.length>0&&G.enabled){const W=N.hits[0].node?.model?.raw||{};$({id:W.id||"N/A",type:W.speckle_type||"Unknown",properties:W})}});const qe=new V(O.getWorldTree(),F,xe);await O.loadObject(qe,!0);const rt=O.getRenderer().sceneBox;if(rt&&le)try{const N=window.THREE||await re(()=>import("./speckle-BvIUXgwc.js").then(te=>te.t),__vite__mapDeps([0,1]),import.meta.url).then(te=>te.default||te),L=new N.Vector3;rt.getSize(L);const W=.02*Math.max(L.x,L.y,L.z);le.setBox(rt,W)}catch(N){console.warn("Section setBox failed:",N)}if(b)return;h.current=O,u.current=!0,A(O),O.resize(),x(!1),console.log("‚úÖ Viewer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞");try{const N=O.getWorldTree(),L=new Map;let W=0;N.walk(te=>{const Ve=te.model?.raw,nt=te.model?.id;if(!nt)return!0;const Ce=Ve?.properties?.["User Defined Attributes"]?.ST_ASSEMBLY_GUID;return W<3&&Ce&&(console.log(`üîç DEBUG WorldTree node: raw.id=${Ve?.id}, model.id=${nt}`),W++),Ce&&(L.has(Ce)||L.set(Ce,[]),L.get(Ce).push(nt)),!0}),J.current=L,console.log(`üìä AssemblyMap –ø–æ—Å—Ç—Ä–æ–µ–Ω: ${L.size} —Å–±–æ—Ä–æ–∫`),l&&l(L)}catch(N){console.warn("–û—à–∏–±–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è assemblyMap:",N)}}catch(I){console.error("–û—à–∏–±–∫–∞:",I),S(I?.message||"–ù–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å"),x(!1)}})(),()=>{b=!0}},[m,t]),a.useEffect(()=>()=>{h.current?.dispose?.(),h.current=null,u.current=!1,d.current&&(d.current.innerHTML="")},[]);const Nt=async b=>{const C=h.current;if(C)try{x(!0),S(null),await C.unloadAll();const{SpeckleLoader:I}=await re(async()=>{const{SpeckleLoader:O}=await import("./speckle-BvIUXgwc.js").then(X=>X.i);return{SpeckleLoader:O}},__vite__mapDeps([0,1]),import.meta.url),B=`${me}/streams/${t}/objects/${b}`,V=new I(C.getWorldTree(),B,xe);await C.loadObject(V,!0);const U=C.getRenderer().sceneBox,F=Y.current?.section;if(U&&F)try{const O=window.THREE||await re(()=>import("./speckle-BvIUXgwc.js").then(H=>H.t),__vite__mapDeps([0,1]),import.meta.url).then(H=>H.default||H),X=new O.Vector3;U.getSize(X);const G=.02*Math.max(X.x,X.y,X.z);F.setBox(U,G)}catch(O){console.warn("Section setBox failed:",O)}C.resize(),x(!1),console.log("‚úÖ –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞:",b.slice(0,8)+"...")}catch(I){console.error("–û—à–∏–±–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏:",I),S(I?.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å"),x(!1)}},dn=async(b,C)=>{const I=h.current;if(!I||!he){console.warn("Viewer –∏–ª–∏ DiffExtension –Ω–µ –≥–æ—Ç–æ–≤—ã");return}try{x(!0),et(!0),Rt(b),Pt(C),Fe(null);const B=`${me}/streams/${t}/objects/${b}`,V=`${me}/streams/${t}/objects/${C}`;console.log("Diff –Ω–∞—á–∞—Ç:",{urlA:B.slice(-12),urlB:V.slice(-12)});const{VisualDiffMode:U}=await re(async()=>{const{VisualDiffMode:G}=await import("./speckle-BvIUXgwc.js").then(H=>H.i);return{VisualDiffMode:G}},__vite__mapDeps([0,1]),import.meta.url),F=U?.PLAIN??0,O=await he.diff(B,V,F,xe),X={added:O?.added?.length||0,removed:O?.removed?.length||0,modified:O?.modified?.length||0,unchanged:O?.unchanged?.length||0};if(console.log("‚úÖ Diff —Ä–µ–∑—É–ª—å—Ç–∞—Ç:",X),Fe(X),he.updateVisualDiff&&he.updateVisualDiff(1),v)try{const G=ee=>!ee||!Array.isArray(ee)?[]:ee.map(Z=>Z?.model?.raw?.id||Z?.model?.id||Z?.id||Z?.raw?.id).filter(Z=>Z),H={unchanged:2155905152,added:4278242304,removed:4291559424,modified:4294945280},ie=[],Se=G(O?.unchanged||[]);Se.length>0&&(ie.push({objectIds:Se,color:H.unchanged}),console.log("‚ö™ Unchanged:",Se.length));const se=G(O?.added||[]);se.length>0&&(ie.push({objectIds:se,color:H.added}),console.log("üü¢ Added:",se.length));const le=G(O?.removed||[]);if(le.length>0&&(ie.push({objectIds:le,color:H.removed}),console.log("üî¥ Removed:",le.length)),O?.modified&&Array.isArray(O.modified)){const ee=[];O.modified.forEach(Z=>{Array.isArray(Z)&&Z.forEach(pe=>{const qe=pe?.model?.raw?.id||pe?.model?.id||pe?.id||pe?.raw?.id;qe&&ee.push(qe)})}),ee.length>0&&(ie.push({objectIds:ee,color:H.modified}),console.log("üü° Modified:",ee.length))}ie.length>0&&(v.setUserObjectColors(ie),console.log("‚úÖ –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–≤–µ—Ç–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"))}catch(G){console.warn("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—Ä–∞—Å–∫–µ –æ–±—ä–µ–∫—Ç–æ–≤:",G)}I.requestRender(),x(!1)}catch(B){console.error("–û—à–∏–±–∫–∞ diff:",B),S(B?.message||"–û—à–∏–±–∫–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π"),x(!1),et(!1),Fe(null)}},un=async()=>{const b=h.current;if(!(!b||!he))try{if(await he.undiff(),v)try{v.removeUserObjectColors(),v.resetFilters()}catch(C){console.warn("–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ —Ü–≤–µ—Ç–æ–≤:",C)}et(!1),Rt(null),Pt(null),Fe(null),b.requestRender(),console.log("‚úÖ Diff –æ—Ç–º–µ–Ω—ë–Ω")}catch(C){console.error("–û—à–∏–±–∫–∞ undiff:",C)}},fn=async()=>{try{x(!0),S(null);const b=await fetch(`${me}/graphql`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${xe}`},body:JSON.stringify({query:Yo,variables:{streamId:t}})});if(!b.ok)throw new Error(`HTTP error! status: ${b.status}`);const C=await b.json();if(C.errors)throw new Error(C.errors[0].message);const I=C.data.stream;if(!I)throw new Error("–ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω");if(!I.commits.items.length)throw new Error("–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ—Ç –∫–æ–º–º–∏—Ç–æ–≤");const B=I.commits.items[0];_(I.name),g(B.referencedObject)}catch(b){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–º–∏—Ç–∞:",b),S(b?.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞"),x(!1)}},Lt=async()=>{const b=h.current;if(b)try{const{CameraController:C}=await re(async()=>{const{CameraController:V}=await import("./speckle-BvIUXgwc.js").then(U=>U.i);return{CameraController:V}},__vite__mapDeps([0,1]),import.meta.url),I=b.getExtension(C);if(!I)return;const B=b.getRenderer().sceneBox;B&&I.setCameraView(B,!0,1.2)}catch(C){console.warn("Fit failed:",C)}},hn=()=>{!D||!f||Qr(b=>{const C=!b;return C?(D.enabled=!0,tt(!0),f.enabled=!1,$(null)):(D.enabled=!1,tt(!1),f.enabled=!0),C})},pn=()=>{const b=h.current;!y||!b||Zr(C=>{const I=!C;return y.enabled=I,y.visible=I,b.requestRender(),I})},mn=async b=>{const C=h.current;if(C)try{const{CameraController:I}=await re(async()=>{const{CameraController:U}=await import("./speckle-BvIUXgwc.js").then(F=>F.i);return{CameraController:U}},__vite__mapDeps([0,1]),import.meta.url),B=C.getExtension(I);if(!B)return;const V={top:"top",front:"front",side:"right",iso:"3d"};B.setCameraView(V[b],!0),C.requestRender()}catch(I){console.warn("Camera view failed:",I)}},we=b=>{const C=h.current;if(!D||!C)return;const I=D.options;D.options={...I,...b},D.removeMeasurement(),C.requestRender()},xn=b=>{Et(b);const C={perpendicular:Ae.PERPENDICULAR,pointToPoint:Ae.POINT_TO_POINT,area:Ae.AREA,point:Ae.POINT};we({type:C[b]})},gn=b=>{_t(b),we({vertexSnap:b})},yn=b=>{sn(b),we({chain:b})},vn=b=>{ln(b),we({units:b})},jn=b=>{cn(b),we({precision:b})},bn=()=>{D&&D.clearMeasurements()},wn=a.useCallback(b=>{b!==m&&g(b)},[m]);return a.useImperativeHandle(c,()=>({getViewer:()=>h.current,reloadModel:Nt,fitToView:Lt,highlightObjects:b=>{if(!(!v||!h.current))try{v.resetFilters(),b.length>0&&v.isolateObjects(b)}catch(C){console.warn("highlightObjects error:",C)}},fitToObjects:b=>{if(!(!v||b.length===0))try{v.isolateObjects(b,void 0,!0,!0)}catch(C){console.warn("fitToObjects error:",C)}},selectAssembly:b=>{const C=J.current.get(b);if(console.log(`üîç selectAssembly: guid=${b}, objectIds count=${C?.length||0}`,C?.slice(0,3)),!C||C.length===0){console.warn("No objects found for assembly:",b);return}v&&(console.log("üîç Resetting filters before isolate"),v.resetFilters(),console.log("üîç Calling filteringExt.isolateObjects"),v.isolateObjects(C))},colorByStatus:b=>{if(!v){console.warn("colorByStatus: filteringExt not ready");return}try{const C=[],I=new Map;let B=0;for(const{assemblyGuid:V,color:U}of b){const F=J.current.get(V);F&&F.length>0&&(I.has(U)||I.set(U,[]),I.get(U).push(...F),B+=F.length)}console.log(`üîç colorByStatus: ${I.size} colors, ${B} total objects`);for(const[V,U]of I.entries()){const F="#"+(V&16777215).toString(16).padStart(6,"0");C.push({objectIds:U,color:F}),console.log(`üîç Color group: ${F} -> ${U.length} objects`)}C.length>0?(console.log("üîç Calling filteringExt.setUserObjectColors with",C.length,"groups"),v.setUserObjectColors(C)):console.warn("colorByStatus: No color groups to apply")}catch(C){console.warn("colorByStatus error:",C)}},getAssemblyMap:()=>J.current,resetSelection:()=>{f&&f.clearSelection(),v&&v.resetFilters(),console.log("üîÑ Selection and filters reset")}})),t?w?e.jsx(mt,{message:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",description:e.jsx("p",{style:{whiteSpace:"pre-line"},children:w}),type:"error",showIcon:!0}):e.jsxs("div",{style:{position:"relative"},children:[e.jsxs(Je,{title:P||`–ú–æ–¥–µ–ª—å: ${t}`,children:[p&&e.jsxs("div",{style:{textAlign:"center",padding:"80px 16px"},children:[e.jsx(jt,{size:"large"}),e.jsx("p",{style:{marginTop:16},children:m?"–ó–∞–≥—Ä—É–∑–∫–∞ 3D –º–æ–¥–µ–ª–∏...":"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞..."})]}),e.jsx("div",{ref:d,style:{width:"100%",height:typeof n=="number"?`${n}px`:n,minHeight:"400px",border:"1px solid #d9d9d9",borderRadius:"8px",overflow:"hidden",position:"relative",background:"#e5e5e5"},children:!p&&k&&e.jsxs(e.Fragment,{children:[e.jsx(Io,{onFit:Lt,onMeasure:hn,onSection:pn,onCameraView:mn,measureActive:Jr,sectionActive:Xr,onToggleSceneExplorer:()=>Tt(b=>!b),onToggleModels:()=>kt(b=>!b),onTogglePropertyFilter:()=>At(b=>!b),sceneExplorerActive:It,modelsActive:Ot,propertyFilterActive:$t}),e.jsx(To,{visible:en,onClose:()=>tt(!1),measurementType:tn,onTypeChange:xn,snapToVertices:rn,onSnapChange:gn,chainMeasurements:nn,onChainChange:yn,units:on,onUnitsChange:vn,precision:an,onPrecisionChange:jn,onClearAll:bn}),e.jsx(No,{visible:It,onClose:()=>Tt(!1),viewerInstance:h.current,filteringExt:v,selectionExt:f,cameraController:fe}),e.jsx(Bo,{visible:Ot,onClose:()=>kt(!1),speckleServer:me,token:xe,streamId:t||"",currentObjectId:m,onSelectObjectId:wn,onSetStreamName:b=>_(b),onStartDiff:dn,onStopDiff:un,diffMode:Yr,diffCommitA:Gr,diffCommitB:Hr,diffStats:Kr}),e.jsx(Wo,{viewer:h.current,filteringExtension:v,worldTree:h.current?.getWorldTree?.(),visible:$t,onClose:()=>At(!1)})]})})]}),!p&&e.jsx(Uo,{selectedElement:z,onClose:()=>$(null)})]}):e.jsx(mt,{message:"–û—à–∏–±–∫–∞",description:"Stream ID –Ω–µ —É–∫–∞–∑–∞–Ω –≤ URL",type:"error",showIcon:!0})});Vr.displayName="FullViewer";const{Title:Go,Text:Ho}=ge,Ko={mgu:{name:"–ú–ì–£",streamId:"69b5048b92",modelId:"9af0e90df9"},mvd:{name:"–ú–í–î",streamId:"69b5048b92",modelId:"9af0e90df9"},airport:{name:"–ê—ç—Ä–æ–ø–æ—Ä—Ç",streamId:"69b5048b92",modelId:"9af0e90df9"}},Jo=()=>{const t=be(),{projectId:r}=Xe(),n=a.useRef(null),s=Ko[r||""]||{name:r,streamId:"69b5048b92"},o=()=>{oe.success("–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞!")};return e.jsxs("div",{className:"viewer-container",children:[e.jsxs("div",{className:"viewer-header",children:[e.jsxs("div",{className:"viewer-header-left",children:[e.jsx(E,{type:"text",icon:e.jsx(Ke,{}),onClick:()=>t(`/project/${r}`),className:"back-btn",children:"–ö –º–æ–¥—É–ª—è–º"}),e.jsxs("div",{className:"viewer-title",children:[e.jsxs(Go,{level:3,style:{margin:0,color:"#fff"},children:["üèóÔ∏è ",s.name]}),e.jsx(Ho,{type:"secondary",children:"3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä"})]})]}),e.jsx("div",{className:"viewer-header-right",children:e.jsx(E,{icon:e.jsx(Hn,{}),onClick:()=>n.current?.fitToView(),children:"–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—ë"})})]}),e.jsx("div",{className:"viewer-content",children:e.jsx(Vr,{ref:n,streamId:s.streamId,height:"calc(100vh - 80px)",showToolbar:!0,onReady:o})})]})},Qo=({projectId:t})=>{const[r,n]=a.useState([]),[s,o]=a.useState(!1),[i,l]=a.useState("");a.useEffect(()=>{c()},[t]);const c=async()=>{o(!0);try{if(window.electronAPI){const x=await window.electronAPI.getActs();n(x)}}catch{oe.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–∫—Ç–æ–≤")}o(!1)},d=async()=>{if(!window.electronAPI){oe.warning("–§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ desktop-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏");return}const x=await window.electronAPI.selectDirectory();if(!x)return;o(!0);const w=oe.loading("–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏...",0);try{const S=await window.electronAPI.scanPDFFolder(x);w(),S.success?(oe.success(`–ù–∞–π–¥–µ–Ω–æ ${S.count} –∞–∫—Ç–æ–≤!`),await c()):oe.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏")}catch(S){w(),oe.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞–ø–∫–∏"),console.error(S)}o(!1)},h=async x=>{window.electronAPI&&await window.electronAPI.openPath(x)},u=r.filter(x=>x.number?.toLowerCase().includes(i.toLowerCase())||x.work_type?.toLowerCase().includes(i.toLowerCase())),p=[{title:"‚Ññ –ê–∫—Ç–∞",dataIndex:"number",key:"number",width:150,render:(x,w)=>e.jsxs("a",{onClick:()=>h(w.file_path),children:[e.jsx(Jn,{})," ",x]})},{title:"–¢–∏–ø —Ä–∞–±–æ—Ç",dataIndex:"work_type",key:"work_type",width:180,render:x=>x?e.jsx(He,{color:"blue",children:x}):"‚Äî"},{title:"–î–∞—Ç–∞ –∞–∫—Ç–∞",dataIndex:"act_date",key:"act_date",width:120},{title:"–ù–∞—á–∞–ª–æ",dataIndex:"start_date",key:"start_date",width:110},{title:"–û–∫–æ–Ω—á–∞–Ω–∏–µ",dataIndex:"end_date",key:"end_date",width:110},{title:"–ö–°",dataIndex:"ks",key:"ks",width:100}];return e.jsxs("div",{className:"aid-content",children:[e.jsxs("div",{className:"aid-toolbar",children:[e.jsx(Le,{placeholder:"–ü–æ–∏—Å–∫ –ø–æ –Ω–æ–º–µ—Ä—É –∏–ª–∏ —Ç–∏–ø—É —Ä–∞–±–æ—Ç...",prefix:e.jsx(bt,{}),value:i,onChange:x=>l(x.target.value),allowClear:!0,style:{width:300}}),e.jsxs("div",{className:"toolbar-actions",children:[e.jsx(E,{type:"primary",icon:e.jsx(Kn,{}),onClick:d,children:"–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É"}),e.jsx(E,{icon:e.jsx(Rr,{}),onClick:c,loading:s,children:"–û–±–Ω–æ–≤–∏—Ç—å"})]})]}),e.jsx("div",{className:"aid-table-wrapper",children:e.jsx(Pr,{columns:p,dataSource:u,rowKey:"id",loading:s,pagination:{pageSize:20,showTotal:x=>`–í—Å–µ–≥–æ: ${x}`},scroll:{x:900},size:"middle"})})]})},{Text:li}=ge,br=[{value:"–ù–µ –∑–∞–∫—Ä—ã—Ç",label:"–ù–µ –∑–∞–∫—Ä—ã—Ç",color:"default"},{value:"–ó–∞–∫—Ä—ã—Ç —á–∞—Å—Ç–∏—á–Ω–æ",label:"–ó–∞–∫—Ä—ã—Ç —á–∞—Å—Ç–∏—á–Ω–æ",color:"warning"},{value:"–ó–∞–∫—Ä—ã—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é",label:"–ó–∞–∫—Ä—ã—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é",color:"success"}],Xo=({projectId:t})=>{const[r,n]=a.useState([]),[s,o]=a.useState(!1),[i,l]=a.useState(""),[c,d]=a.useState(null);a.useEffect(()=>{h()},[t]);const h=async()=>{o(!0);try{if(window.electronAPI){const m=await window.electronAPI.getElementsByProject(t);n(m)}}catch{oe.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤")}o(!1)},u=async(m,g)=>{window.electronAPI&&(await window.electronAPI.updateElementStatus(m,g),n(P=>P.map(_=>_.guid===m?{..._,status:g}:_)),oe.success("–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω"))},p=m=>{switch(m){case"–ó–∞–∫—Ä—ã—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é":return e.jsx(Zn,{style:{color:"#22c55e"}});case"–ó–∞–∫—Ä—ã—Ç —á–∞—Å—Ç–∏—á–Ω–æ":return e.jsx(Xn,{style:{color:"#f59e0b"}});default:return e.jsx(Qn,{style:{color:"#6b7280"}})}},x=r.filter(m=>{const g=m.name?.toLowerCase().includes(i.toLowerCase())||m.position?.toLowerCase().includes(i.toLowerCase()),P=!c||m.status===c;return g&&P}),w=[{title:"–ü–æ–∑–∏—Ü–∏—è",dataIndex:"position",key:"position",width:120},{title:"–ò–º—è",dataIndex:"name",key:"name",width:180,render:m=>e.jsx("strong",{children:m})},{title:"–ú–∞—Ç–µ—Ä–∏–∞–ª",dataIndex:"material",key:"material",width:100},{title:"–≠—Ç–∞–∂",dataIndex:"level",key:"level",width:90},{title:"–û–±—ä—ë–º",dataIndex:"volume",key:"volume",width:90,render:m=>m?`${m.toFixed(2)}`:"‚Äî"},{title:"–°—Ç–∞—Ç—É—Å",dataIndex:"status",key:"status",width:180,render:(m,g)=>e.jsx(K,{value:m||"–ù–µ –∑–∞–∫—Ä—ã—Ç",size:"small",style:{width:160},onChange:P=>u(g.guid,P),children:br.map(P=>e.jsxs(K.Option,{value:P.value,children:[p(P.value)," ",P.label]},P.value))})}],S={total:r.length,closed:r.filter(m=>m.status==="–ó–∞–∫—Ä—ã—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é").length,partial:r.filter(m=>m.status==="–ó–∞–∫—Ä—ã—Ç —á–∞—Å—Ç–∏—á–Ω–æ").length};return e.jsxs("div",{className:"aid-content",children:[e.jsxs("div",{className:"aid-stats",children:[e.jsxs("div",{className:"stat-item",children:[e.jsx("span",{className:"stat-value",children:S.total}),e.jsx("span",{className:"stat-label",children:"–í—Å–µ–≥–æ"})]}),e.jsxs("div",{className:"stat-item success",children:[e.jsx("span",{className:"stat-value",children:S.closed}),e.jsx("span",{className:"stat-label",children:"–ó–∞–∫—Ä—ã—Ç–æ"})]}),e.jsxs("div",{className:"stat-item warning",children:[e.jsx("span",{className:"stat-value",children:S.partial}),e.jsx("span",{className:"stat-label",children:"–ß–∞—Å—Ç–∏—á–Ω–æ"})]})]}),e.jsxs("div",{className:"aid-toolbar",children:[e.jsx(Le,{placeholder:"–ü–æ–∏—Å–∫...",prefix:e.jsx(bt,{}),value:i,onChange:m=>l(m.target.value),allowClear:!0,style:{width:250}}),e.jsx(K,{placeholder:"–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É",value:c,onChange:d,allowClear:!0,style:{width:180},children:br.map(m=>e.jsx(K.Option,{value:m.value,children:e.jsx(He,{color:m.color,children:m.label})},m.value))})]}),e.jsx("div",{className:"aid-table-wrapper",children:e.jsx(Pr,{columns:w,dataSource:x,rowKey:"guid",loading:s,pagination:{pageSize:50},scroll:{x:900},size:"small"})})]})},{Title:Zo,Text:ei}=ge,ti=()=>{const t=be(),{projectId:r}=Xe(),n=[{key:"registry",label:e.jsxs("span",{children:[e.jsx(ts,{})," –†–µ–µ—Å—Ç—Ä –∞–∫—Ç–æ–≤"]}),children:e.jsx(Qo,{projectId:r||""})},{key:"elements",label:e.jsxs("span",{children:[e.jsx(rs,{})," –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–¥–µ–ª–∏"]}),children:e.jsx(Xo,{projectId:r||""})}];return e.jsxs("div",{className:"aid-container",children:[e.jsx("div",{className:"aid-header",children:e.jsxs("div",{children:[e.jsx(De,{children:e.jsx(E,{type:"text",icon:e.jsx(Ke,{}),onClick:()=>t(`/project/${r}`),className:"back-btn",children:"–ö –º–æ–¥—É–ª—è–º"})}),e.jsx(Zo,{level:2,className:"aid-title",children:"üìã –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"}),e.jsx(ei,{type:"secondary",children:"–†–µ–µ—Å—Ç—Ä –∞–∫—Ç–æ–≤ –ò–î –∏ –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –º–æ–¥–µ–ª–∏"})]})}),e.jsx("div",{className:"aid-tabs",children:e.jsx(es,{items:n,defaultActiveKey:"registry",size:"large"})})]})},ri=()=>{const{projectId:t}=Xe();return e.jsx(Ye,{to:`/project/${t}/aid`,replace:!0})},ni=()=>e.jsx(ns,{style:{minHeight:"100vh",background:"#0a0f1c"},children:e.jsxs(to,{children:[e.jsx(ne,{path:"/",element:e.jsx(jo,{})}),e.jsx(ne,{path:"/projects",element:e.jsx(wo,{})}),e.jsx(ne,{path:"/project/:projectId",element:e.jsx(Po,{})}),e.jsx(ne,{path:"/project/:projectId/aid",element:e.jsx(ti,{})}),e.jsx(ne,{path:"/project/:projectId/aid/elements",element:e.jsx(ri,{})}),e.jsx(ne,{path:"/project/:projectId/viewer",element:e.jsx(Jo,{})}),e.jsx(ne,{path:"/aid/*",element:e.jsx(Ye,{to:"/projects"})}),e.jsx(ne,{path:"/viewer/:projectId",element:e.jsx(Ye,{to:"/projects"})}),e.jsx(ne,{path:"*",element:e.jsx(Ye,{to:"/"})})]})});ds.createRoot(document.getElementById("root")).render(e.jsx(ss.StrictMode,{children:e.jsx(ye,{locale:go,theme:{algorithm:ve.darkAlgorithm,token:{colorPrimary:"#3b82f6",borderRadius:8,colorBgContainer:"#111827",colorBgElevated:"#1f2937"}},children:e.jsx(so,{children:e.jsx(ni,{})})})}));
