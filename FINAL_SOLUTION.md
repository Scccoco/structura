# Финальное решение проблемы Nextcloud

## Текущая ситуация
- ✅ База данных доступна
- ✅ Переменные окружения установлены
- ❌ Автоматическая установка не работает
- ❌ config.php не создается

## Решение 1: Установка через occ (командная строка)

Запустите:
```cmd
.\install-nextcloud-occ.bat
```

Это установит Nextcloud через команду `occ` напрямую.

## Решение 2: Ручная установка через веб-интерфейс

Если occ не работает:

1. Убедитесь, что директория config пустая:
   ```powershell
   Remove-Item -Recurse -Force data\nextcloud\config\*
   ```

2. Перезапустите Nextcloud:
   ```powershell
   cd docker
   docker compose restart nextcloud
   ```

3. Откройте http://localhost:8081

4. Должна открыться страница установки. Введите:
   - **База данных**: PostgreSQL
   - **Имя пользователя БД**: nextcloud
   - **Пароль БД**: nextcloud_pass
   - **Имя БД**: nextcloud
   - **Хост БД**: postgres_nc:5432
   - **Логин администратора**: admin
   - **Пароль администратора**: admin

## Решение 3: Проверка версии Nextcloud

Возможно, версия 27 не поддерживает автоматическую установку. Попробуйте изменить версию в docker-compose.yml:

```yaml
image: nextcloud:26-apache
```

Или:

```yaml
image: nextcloud:latest
```

## Что делать дальше

1. Попробуйте `.\install-nextcloud-occ.bat` - это самый надежный способ
2. Если не работает - используйте ручную установку через веб-интерфейс
3. Если и это не работает - проверьте логи и сообщите мне

